[{"details": {"endIndex": 1073, "endLine": 47, "hasReturn": true, "name": "promise_to_group_leaves", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(promise_to_group_leaves)", "reachName": "promise_to_group_leaves", "reason": "Valid", "startIndex": 154, "startLine": 10, "type": "function"}, "function_code": "function promise_to_group_leaves(leaves) {\n\n  if ( ! leaves ) {\n    throw new Error('Did not get \"leaves\" in promise_to_group_leaves');\n  }\n\n  let grouped_leaves = {};\n\n  // Group leaves by years\n  leaves.forEach(leave => {\n    let year = moment.utc(leave.get_start_leave_day().date).format('YYYY');\n\n    if ( ! grouped_leaves[year]) {\n      grouped_leaves[ year ] = {\n        year : year,\n        leaves : [],\n      };\n    }\n\n    grouped_leaves[ year ].leaves.push(leave);\n  });\n\n  // Sort year groups\n  grouped_leaves = _\n    .values( grouped_leaves )\n    .sort((a,b) => a.year > b.year ? -1 : a.year < b.year ? 1 : 0);\n\n  // Calculate total allowance deduction per group\n  grouped_leaves.forEach(group => {\n    group.total_deduction = _.reduce(\n      group.leaves.map(leave => leave.get_deducted_days_number()),\n      (memo, number) => memo + number,\n      0\n    );\n  });\n\n  return Promise.resolve(grouped_leaves);\n}", "function_name": "promise_to_group_leaves", "function_parameters": [{"name": "leaves", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/leave_collection.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "null", "js_value": "null"}]}, {"input_values": [{"js_type": "number", "js_value": "0"}]}, {"input_values": [{"js_type": "string", "js_value": "\"Thank you for using PONICODE! Get to 80% coverage super fast !\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"123456789\""}]}, {"input_values": [{"js_type": "boolean", "js_value": "false"}]}, {"input_values": [{"js_type": "number", "js_value": "NaN"}]}, {"input_values": [{"js_type": "undefined", "js_value": "undefined"}]}]}, {"details": {"endIndex": 1341, "endLine": 60, "hasReturn": true, "name": "promise_to_sort_leaves", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(promise_to_sort_leaves)", "reachName": "promise_to_sort_leaves", "reason": "Valid", "startIndex": 1157, "startLine": 54, "type": "function"}, "function_code": "function promise_to_sort_leaves(leaves) {\n  return Promise.resolve( leaves.sort(\n    (a,b) => a.date_start > b.date_start\n      ? -1 : a.date_start < b.date_start\n      ? 1 : 0\n  ));\n}", "function_name": "promise_to_sort_leaves", "function_parameters": [{"name": "leaves", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/leave_collection.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"Ponicponicodeponiponicoooooooooode18774563\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"123456789\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"#'{7855663]}\\u00e9\\u00e9\\u00e0\\u00e0\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"p\""}]}]}, {"details": {"endIndex": 799, "endLine": 33, "hasReturn": true, "name": "getAudit", "paramCount": 1, "paramsAllSimple": false, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().getAudit", "reachNames": ["getAudit"], "reason": "UnsupportedParameterNotSimple", "startIndex": 689, "startLine": 26, "type": "function"}, "function_code": "({companyId}) => {\n  return Models.Audit.findAll({\n    where : {\n      companyId,\n    },\n    raw: true,\n  })\n}", "function_name": "getAudit", "function_parameters": [{"keys": ["companyId"], "type": "object_pattern", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/audit.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "companyId", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "companyId", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "companyId", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}]}, {"details": {"endIndex": 1812, "endLine": 48, "hasReturn": true, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 116, "startLine": 8, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n\n    return queryInterface\n      .describeTable('Users')\n      .then(attributes => {\n\n        if ( ! attributes.hasOwnProperty('adjustment')) {\n          return Promise.resolve();\n        }\n\n        if ('sqlite' !== queryInterface.sequelize.getDialect()) {\n          // For non SQLite: it is easy\n          return queryInterface.removeColumn(\n            models.User.tableName,\n            'adjustment'\n          );\n        }\n\n        // For SQLite it is \"fun\"\n\n        return queryInterface\n          // Create Temp Users based on current model definitiom\n          .createTable('Users_backup', models.User.attributes)\n\n          .then(function(){\n            return queryInterface.sequelize.query('PRAGMA foreign_keys=off;');\n          })\n\n          // Copy data form original Users into new Temp one\n          .then(function(){\n            return queryInterface.sequelize.query(\n              'INSERT INTO `Users_backup` (`id`, `email`, `password`, `name`, `lastname`, `activated`, `admin`, `start_date`, `end_date`, `createdAt`, `updatedAt`, `companyId`, `DepartmentId`, `auto_approve`) SELECT `id`, `email`, `password`, `name`, `lastname`, `activated`, `admin`, `start_date`, `end_date`, `createdAt`, `updatedAt`, `companyId`, `DepartmentId`, `auto_approve` FROM `'+ models.User.tableName +'`');\n          })\n\n          .then(() => queryInterface.dropTable( models.User.tableName ))\n          .then(() => queryInterface.renameTable('Users_backup', models.User.tableName))\n          .then(() => queryInterface.sequelize.query('PRAGMA foreign_keys=on;'))\n          .then(() => queryInterface.addIndex(models.User.tableName, ['companyId']))\n\n      });\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20171220-drop-adjustment-column-from-user.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"details": {"endIndex": 1915, "endLine": 53, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 1823, "startLine": 50, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    // No way back!\n    return Promise.resolve();\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20171220-drop-adjustment-column-from-user.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"details": {"endIndex": 1446, "endLine": 52, "hasReturn": true, "name": "__direct_export__", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 1356, "startLine": 50, "type": "function"}, "function_code": "function(args){\n  return args.driver.call(function(){return check_elements_func(args)});\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/t/lib/check_elements.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\".\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/folder/\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"./path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"/path/to/file\""}]}]}, {"details": {"endIndex": 1572, "endLine": 63, "hasReturn": true, "name": "__direct_export__", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 1485, "startLine": 61, "type": "function"}, "function_code": "function(args){\n  return args.driver.call(function(){return logout_user_func(args)});\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/t/lib/logout_user.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\".\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"./path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"/path/to/file\""}]}]}, {"details": {"endIndex": 1947, "endLine": 60, "hasReturn": false, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 82, "startLine": 6, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n\n    queryInterface.describeTable('Departments').then(function(attributes){\n\n      if (attributes.hasOwnProperty('allowance')) {\n        return 1;\n      }\n\n      if ('sqlite' === queryInterface.sequelize.getDialect()) {\n\n        console.log('Going into SQLIite case');\n\n        return queryInterface\n          // Create Temp Departments based on current model definitiom\n          .createTable('Departments_backup', models.Department.attributes)\n\n          .then(function(){\n            return queryInterface.sequelize.query('PRAGMA foreign_keys=off;');\n          })\n\n          // Copy data form original Departments into new Temp one\n          .then(function(){\n            return queryInterface.sequelize.query(\n              'INSERT INTO `Departments_backup` (id, name, include_public_holidays, createdAt, updatedAt, companyId, bossId, allowance) SELECT id, name, include_public_holidays, createdAt, updatedAt, companyId, bossId, allowence FROM `'+ models.Department.tableName +'`');\n          })\n\n          .then(function(){\n            return queryInterface.dropTable( models.Department.tableName );\n          })\n\n          .then(function(){\n            return queryInterface.renameTable('Departments_backup', models.Department.tableName);\n          })\n\n          .then(function(){\n            return queryInterface.sequelize.query('PRAGMA foreign_keys=on;');\n          })\n\n          .then(function(){\n            queryInterface.addIndex(models.Department.tableName, ['companyId']);\n          })\n\n          .then(function(){\n            queryInterface.addIndex(models.Department.tableName, ['id']);\n          });\n\n      } else {\n\n        console.log('Generic option');\n\n        return queryInterface.renameColumn('Departments', 'allowence', 'allowance')\n          .then(function(d){ console.dir(d) });\n      }\n    });\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20170329060832-rename_allowence_to_allowance.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"details": {"endIndex": 2081, "endLine": 64, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 1958, "startLine": 62, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    return queryInterface.renameColumn('Departments', 'allowance', 'allowence');\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20170329060832-rename_allowence_to_allowance.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"details": {"endIndex": 14422, "endLine": 479, "hasReturn": true, "name": "ensure_user_was_not_useed_elsewhere_while_being_inactive", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(ensure_user_was_not_useed_elsewhere_while_being_inactive)", "reachName": "ensure_user_was_not_useed_elsewhere_while_being_inactive", "reason": "Valid", "startIndex": 13411, "startLine": 444, "type": "function"}, "function_code": "function(args){\n  var\n    employee            = args.employee,\n    new_user_attributes = args.new_user_attributes,\n    req                 = args.req,\n    model               = args.model;\n\n  if (\n    // Employee has end_date defined\n    employee.end_date &&\n    (\n     ! new_user_attributes.end_date\n     ||\n      (\n        // new \"end_date\" is provided\n        // new \"end_date\" is in future\n        new_user_attributes.end_date &&\n        moment.utc( new_user_attributes.end_date ).startOf('day').toDate() >= req.user.company.get_today().startOf('day').toDate()\n      )\n    )\n  ) {\n    return model.User.find_by_email(new_user_attributes.email)\n      .then(function(user){\n\n        if (user && user.companyId !== employee.companyId) {\n          var error_msg = 'There is an active account with similar email somewhere within system.';\n          req.session.flash_error(error_msg);\n          throw new Error(error_msg);\n        }\n\n        return Promise.resolve();\n      });\n  }\n\n  return Promise.resolve();\n}", "function_name": "ensure_user_was_not_useed_elsewhere_while_being_inactive", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/users/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"1user@ponicode.com\""}, {"js_key": "end_date", "js_type": "undefined", "js_value": "undefined"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "end_date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"ponicode.com\""}, {"js_key": "end_date", "js_type": "number", "js_value": "NaN"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "end_date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"01/01/2020\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "end_date", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"1user@ponicode.com\""}, {"js_key": "end_date", "js_type": "undefined", "js_value": "undefined"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "end_date", "js_type": "string", "js_value": "\"01/01/2020\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "end_date", "js_type": "number", "js_value": "0"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "end_date", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "end_date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "end_date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "end_date", "js_type": "number", "js_value": "NaN"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "end_date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"ponicode.com\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "end_date", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_key": "end_date", "js_type": "boolean", "js_value": "false"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "end_date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "end_date", "js_type": "number", "js_value": "0"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "end_date", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}]}]}, {"details": {"endIndex": 15119, "endLine": 506, "hasReturn": true, "name": "ensure_email_is_not_used_elsewhere", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(ensure_email_is_not_used_elsewhere)", "reachName": "ensure_email_is_not_used_elsewhere", "reason": "Valid", "startIndex": 14569, "startLine": 484, "type": "function"}, "function_code": "function(args){\n  var\n    employee            = args.employee,\n    new_user_attributes = args.new_user_attributes,\n    req                 = args.req,\n    model               = args.model;\n\n  if (new_user_attributes.email === employee.email) {\n    return Promise.resolve();\n  }\n\n  return model.User\n    .find_by_email(new_user_attributes.email)\n    .then(function(user){\n\n      if (user) {\n        req.session.flash_error('Email is already in use');\n        throw new Error('Email is already used');\n      }\n\n      return Promise.resolve();\n    });\n}", "function_name": "ensure_email_is_not_used_elsewhere", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/users/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"ponicode.com\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"ponicode.com\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"ponicode.com\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}]}]}, {"details": {"endIndex": 16093, "endLine": 538, "hasReturn": true, "name": "ensure_we_are_not_removing_last_admin", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(ensure_we_are_not_removing_last_admin)", "reachName": "ensure_we_are_not_removing_last_admin", "reason": "Valid", "startIndex": 15166, "startLine": 508, "type": "function"}, "function_code": "function(args){\n  var\n    employee            = args.employee,\n    new_user_attributes = args.new_user_attributes,\n    req                 = args.req,\n    model               = args.model;\n\n  if (\n    // It is about to change admin rights\n    new_user_attributes.admin !== employee.admin\n    // and it is revoking admin rights\n    && ! new_user_attributes.admin\n  ) {\n    return model.User\n      .count({ where : {\n        companyId : employee.companyId,\n        id        : { $ne : employee.id},\n        admin     : true,\n      }})\n      .then(function(number_of_admins_to_be_left){\n        if (number_of_admins_to_be_left > 0) {\n          return Promise.resolve();\n        }\n\n        req.session.flash_error('This is last admin within company. Cannot revoke admin rights.');\n        throw new Error('Attempt to revoke admin rights from last admin in comapny '+employee.companyId);\n      });\n  }\n\n  return Promise.resolve();\n}", "function_name": "ensure_we_are_not_removing_last_admin", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/users/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "admin", "js_type": "null", "js_value": "null"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user.ponicode.com\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "admin", "js_type": "string", "js_value": "\"user@ponicode\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "admin", "js_type": "boolean", "js_value": "false"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "admin", "js_type": "string", "js_value": "\"\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "admin", "js_type": "null", "js_value": "null"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "admin", "js_type": "string", "js_value": "\"user@ponicode\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user@ponicode\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "admin", "js_type": "number", "js_value": "0"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "admin", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "admin", "js_type": "undefined", "js_value": "undefined"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "admin", "js_type": "boolean", "js_value": "false"}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"ponicode.com\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "new_user_attributes", "js_type": "object", "js_value": [{"js_key": "admin", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"js_key": "employee", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}]}]}, {"details": {"endIndex": 27502, "endLine": 912, "hasReturn": true, "name": "promise_user_list_data_for_rendering", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(promise_user_list_data_for_rendering)", "reachName": "promise_user_list_data_for_rendering", "reason": "Valid", "startIndex": 26476, "startLine": 892, "type": "function"}, "function_code": "function promise_user_list_data_for_rendering(args) {\n  let\n    company = args[0],\n    users_info = args[1];\n\n  let users_info_for_rendering = users_info.map(ui => ({\n    user_id                               : ui.user_row.id,\n    user_email                            : ui.user_row.email,\n    user_name                             : ui.user_row.name,\n    user_lastname                         : ui.user_row.lastname,\n    user_full_name                        : ui.user_row.full_name(),\n    department_id                         : ui.user_row.department.id,\n    department_name                       : ui.user_row.department.name,\n    is_admin                              : ui.user_row.admin,\n    number_of_days_available_in_allowance : ui.number_of_days_available_in_allowance,\n    number_of_days_taken_from_allowance   : ui.user_row.calculate_number_of_days_taken_from_allowance(),\n    is_active                             : ui.user_row.is_active(),\n  }));\n\n  return Promise.resolve([company, users_info_for_rendering]);\n}", "function_name": "promise_user_list_data_for_rendering", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/users/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"path/to/file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/folder/\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"/path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}]}, {"details": {"endIndex": 28289, "endLine": 944, "hasReturn": true, "name": "users_list_as_csv", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(users_list_as_csv)", "reachName": "users_list_as_csv", "reason": "Valid", "startIndex": 27504, "startLine": 914, "type": "function"}, "function_code": "function users_list_as_csv(args) {\n  let users_info = args.users_info,\n      company = args.company,\n      res = args.res;\n\n  // Compose file name\n  res.attachment(\n    company.name_for_machine()\n      + '_employees_on_'\n      + company.get_today().format('YYYY_MMM_DD')\n      + '.csv'\n  );\n\n  // Compose result CSV header\n  let content = [['email', 'lastname', 'name', 'department', 'remaining allowance', 'days used']];\n\n  // ... and body\n  users_info.forEach(ui => {\n    content.push([\n      ui.user_email,\n      ui.user_lastname,\n      ui.user_name,\n      ui.department_name,\n      ui.number_of_days_available_in_allowance,\n      ui.number_of_days_taken_from_allowance\n    ]);\n  });\n\n  return csv.stringifyAsync( content )\n    .then(csv_data_string => res.send(csv_data_string));\n}", "function_name": "users_list_as_csv", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/users/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"path/to/file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"./path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/folder/\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"/path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}]}, {"details": {"endIndex": 31967, "endLine": 1065, "hasReturn": true, "name": "ensure_user_id_is_integer", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(ensure_user_id_is_integer)", "reachName": "ensure_user_id_is_integer", "reason": "Valid", "startIndex": 31689, "startLine": 1054, "type": "function"}, "function_code": "function ensure_user_id_is_integer(args){\n    var req     = args.req,\n        user_id = args.user_id;\n\n    if (! validator.isInt(user_id)){\n        throw new Error(\n          'User '+req.user.id+' tried to edit user with non-integer ID: '+user_id\n        );\n    }\n\n    return;\n}", "function_name": "ensure_user_id_is_integer", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/users/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}]}, {"js_key": "user_id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}]}]}, {"js_key": "user_id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}]}]}, {"js_key": "user_id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}]}]}, {"js_key": "user_id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}]}]}, {"js_key": "user_id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}]}]}, {"js_key": "user_id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}]}]}]}, {"details": {"endIndex": 381, "endLine": 14, "hasReturn": true, "name": "week_day_flag_setter", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(week_day_flag_setter)", "reachName": "week_day_flag_setter", "reason": "Valid", "startIndex": 244, "startLine": 12, "type": "function"}, "function_code": "function week_day_flag_setter(flag_name) {\n  return function(v){ this.setDataValue(flag_name,  v ? works_whole_day() : works_none()) };\n}", "function_name": "week_day_flag_setter", "function_parameters": [{"name": "flag_name", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/db/schedule.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "boolean", "js_value": "false"}]}, {"input_values": [{"js_type": "boolean", "js_value": "true"}]}]}, {"details": {"endIndex": 4381, "endLine": 158, "hasReturn": true, "name": "__direct_export__", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 400, "startLine": 16, "type": "function"}, "function_code": "function(sequelize, DataTypes){\n\n  var Schedule = sequelize.define(\"Schedule\", {\n    monday : {\n      type         : DataTypes.INTEGER,\n      allowNull    : false,\n      defaultValue : works_whole_day(),\n      set          : week_day_flag_setter('monday'),\n    },\n    tuesday : {\n      type         : DataTypes.INTEGER,\n      allowNull    : false,\n      defaultValue : works_whole_day(),\n      set          : week_day_flag_setter('tuesday'),\n    },\n    wednesday : {\n      type         : DataTypes.INTEGER,\n      allowNull    : false,\n      defaultValue : works_whole_day(),\n      set          : week_day_flag_setter('wednesday'),\n    },\n    thursday : {\n      type         : DataTypes.INTEGER,\n      allowNull    : false,\n      defaultValue : works_whole_day(),\n      set          : week_day_flag_setter('thursday'),\n    },\n    friday : {\n      type         : DataTypes.INTEGER,\n      allowNull    : false,\n      defaultValue : works_whole_day(),\n      set          : week_day_flag_setter('friday'),\n    },\n    saturday : {\n      type         : DataTypes.INTEGER,\n      allowNull    : false,\n      defaultValue : works_none(),\n      set          : week_day_flag_setter('saturday'),\n    },\n    sunday : {\n      type         : DataTypes.INTEGER,\n      allowNull    : false,\n      defaultValue : works_none(),\n      set          : week_day_flag_setter('sunday'),\n    },\n  },{\n\n    underscored     : true,\n    freezeTableName : true,\n    tableName       : 'schedule',\n\n    indexes : [\n      { fields : ['user_id'] },\n      { fields : ['company_id'] },\n    ],\n\n    classMethods: {\n      associate : function( models ) {\n        Schedule.belongsTo(models.Company, {as : 'company', foreignKey : 'company_id'});\n        Schedule.belongsTo(models.User, {as : 'user', foreignKey : 'user_id'});\n      },\n\n      promise_to_build_default_for : function(args){\n        var company_id = args.company_id,\n            user_id = args.user_id;\n\n        if ( ! company_id && ! user_id ) {\n          throw new Error('Needs to have either company_id or user_id');\n        }\n\n        var default_schedule = sequelize.models.Schedule.build({\n          company_id : company_id,\n          user_id    : user_id,\n        });\n\n        return Promise.resolve(default_schedule);\n      },\n    },\n\n    validate : {\n      relatesToEitherUserOrCompanyButNotBoth : function(){\n        if ( this.company_id && this.user_id ) {\n          console.error('company_id='+this.company_id+', user_id='+this.user_id);\n          throw new Error('Schedule should be connected either to company of to user but not to both');\n        }\n      },\n\n      relatesToUserOrCompany : function(){\n        if ( ! this.company_id && ! this.user_id ){\n          console.error('company_id='+this.company_id+', user_id='+this.user_id);\n          throw new Error('Schedule needs to be related to eaither company or user');\n        }\n      },\n    },\n\n    instanceMethods : {\n      is_user_specific : function() {\n        return !! this.user_id;\n      },\n\n      is_it_working_day : function(args){\n        var day = args.day;\n\n        if ( ! day ) {\n          throw new Error('\"is_it_working_day\" requires to have \"day\" parameter');\n        }\n\n        return this[ moment.utc(day).format('dddd').toLowerCase() ] === works_whole_day();\n      },\n\n      works_monday : function(){\n        return this.monday === works_whole_day();\n      },\n\n      works_tuesday : function(){\n        return this.tuesday === works_whole_day();\n      },\n\n      works_wednesday : function(){\n        return this.wednesday === works_whole_day();\n      },\n\n      works_thursday : function(){\n        return this.thursday === works_whole_day();\n      },\n\n      works_friday : function(){\n        return this.friday === works_whole_day();\n      },\n\n      works_saturday : function(){\n        return this.saturday === works_whole_day();\n      },\n\n      works_sunday : function(){\n        return this.sunday === works_whole_day();\n      },\n\n    },\n  });\n\n  return Schedule;\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "sequelize", "type": "simple", "variadic": false}, {"name": "DataTypes", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/db/schedule.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"fr\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ru\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ru\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"fr\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ar\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"cn\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ru\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}]}, {"details": {"endIndex": 3663, "endLine": 130, "hasReturn": true, "name": "__direct_export__", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 382, "startLine": 15, "type": "function"}, "function_code": "passport => {\n\n  router.all(\n    /.*/,\n    passport.authenticate('bearer', { session: false }),\n    (req, res, next) => {\n      if ( req.isAuthenticated() ) {\n        return next();\n      }\n\n      return res.status(401).json({ ok : false});\n  });\n\n  router.get(\n    '/',\n    (_req, res) => res.json({ok : true})\n  );\n\n  router.get(\n    '/report/allowance',\n    (req, res) => {\n\n      const startDate = validator.isDate(req.query['start_date'])\n        ? moment.utc(req.query['start_date'])\n        : req.user.company.get_today();\n\n      const endDate = validator.isDate(req.query['end_date'])\n        ? moment.utc(req.query['end_date'])\n        : req.user.company.get_today();\n\n      const teamView = new TeamView({\n        user      : req.user,\n        start_date : startDate,\n        end_date   : endDate,\n      });\n\n      const currentDeparmentId  = validator.isNumeric(req.query['department'])\n        ? req.query['department']\n        : null;\n\n      Promise.join(\n        teamView.promise_team_view_details({\n          department_id : currentDeparmentId,\n        }),\n        req.user.get_company_with_all_leave_types(),\n        (teamViewDetails, company) => {\n          return teamView\n            .inject_statistics({\n              team_view_details : teamViewDetails,\n              leave_types       : company.leave_types,\n            })\n            .then(teamViewDetails => (\n              res.json({data : [\n                teamViewDetails.users_and_leaves.map(ul => ({\n                  userId: ul.user.id,\n                  userEmail: ul.user.email,\n                  userLastname: ul.user.lastname,\n                  userName: ul.user.name,\n                  leaveTypeBreakDown:  ul.statistics.leave_type_break_down.pretty_version,\n                  deductedDays: ul.statistics.deducted_days,\n                }))\n              ]})\n            ))\n        })\n        .catch(error => {\n          console.log(\n            'An error occured when user '+req.user.id+\n            ' tried to access /reports/allowancebytime page: '+error\n          );\n\n          res.json({ error })\n        });\n    \n    }\n  );\n\n  router.get(\n    '/report/absence',\n    (req,res) => {\n\n      const startDate = validator.isDate(req.query['start_date'])\n        ? moment.utc(req.query['start_date'])\n        : req.user.company.get_today();\n\n      const endDate = validator.isDate(req.query['end_date'])\n        ? moment.utc(req.query['end_date'])\n        : req.user.company.get_today();\n\n      const departmentId  = validator.isNumeric(req.query['department'])\n        ? req.query['department']\n        : null;\n\n      let result = getUsersWithLeaves({company:req.user.company, startDate, endDate, departmentId});\n\n      result = result\n        .then(data => res.json(data))\n        .catch(error => {\n          console.log(`An error occured when trying to access /report/absence: ${error} at ${error.stack}`);\n          res.json({ error: `${error}` });\n        });\n  });\n\n  router.get(\n    '/audit/',\n    (req,res) => {\n      getAudit({companyId: req.user.companyId})\n        .then(data => res.json(data))\n        .catch(error => {\n          console.log(`Failed to fetch Audit data: ${error} at ${error.stack}`);\n          res.json({ error: `${error}` });\n        });\n    }\n  );\n\n  return router;\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "passport", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/integration_api.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "number", "js_value": "587"}]}, {"input_values": [{"js_type": "number", "js_value": "8000"}]}, {"input_values": [{"js_type": "number", "js_value": "3000"}]}, {"input_values": [{"js_type": "number", "js_value": "457"}]}]}, {"details": {"endIndex": 2071, "endLine": 71, "hasReturn": true, "name": "__direct_export__", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 32, "startLine": 3, "type": "function"}, "function_code": "function(sequelize, DataTypes) {\n    var LeaveType = sequelize.define(\"LeaveType\", {\n        // TODO add validators!\n        name : {\n            type      : DataTypes.STRING,\n            allowNull : false\n        },\n        color : {\n            type         : DataTypes.STRING,\n            allowNull    : false,\n            defaultValue : '#ffffff',\n        },\n        use_allowance : {\n            type         : DataTypes.BOOLEAN,\n            allowNull    : false,\n            defaultValue : true,\n        },\n        limit : {\n            type         : DataTypes.INTEGER,\n            allowNull    : false,\n            defaultValue : 0,\n        },\n        sort_order : {\n          type         : DataTypes.INTEGER,\n          allowNull    : false,\n          defaultValue : 0,\n          comment      : \"Is used to determine sorting order of leave types\",\n        },\n    }, {\n        classMethods: {\n            associate : function( models ) {\n                LeaveType.belongsTo(models.Company, {as : 'company'});\n                LeaveType.hasMany(models.Leave, {as : 'leaves', foreignKey : 'leaveTypeId'});\n            },\n\n            generate_leave_types : function(args){\n                var company = args.company;\n\n                return LeaveType.bulkCreate([\n                    {\n                        name : 'Holiday',\n                        color : '#22AA66',\n                        companyId : company.id,\n                    },\n                    {\n                        name : 'Sick Leave',\n                        color : '#459FF3',\n                        companyId : company.id,\n                        limit : 10,\n                        use_allowance : 0,\n                    },\n                ])\n            },\n        },\n\n        instanceMethods : {\n          get_color_class : function() {\n            let value_in_db = this.color || '';\n\n            return value_in_db.match(/^\\s*\\#/)\n              ? 'leave_type_color_1'\n              : value_in_db;\n          }\n\n        }\n    });\n\n    return LeaveType;\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "sequelize", "type": "simple", "variadic": false}, {"name": "DataTypes", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/db/leave_type.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"cn\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "BOOLEAN", "js_type": "string", "js_value": "\"object\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"fr\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Foo bar\""}, {"js_key": "BOOLEAN", "js_type": "string", "js_value": "\"string\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Hello, world!\""}, {"js_key": "BOOLEAN", "js_type": "string", "js_value": "\"object\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"fr\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"foo bar\""}, {"js_key": "BOOLEAN", "js_type": "string", "js_value": "\"array\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"cn\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "BOOLEAN", "js_type": "string", "js_value": "\"number\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ar\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"PONICODE\""}, {"js_key": "BOOLEAN", "js_type": "string", "js_value": "\"array\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "BOOLEAN", "js_type": "string", "js_value": "\"array\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "BOOLEAN", "js_type": "string", "js_value": "\"string\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Welcome to Ponicode!\""}, {"js_key": "BOOLEAN", "js_type": "string", "js_value": "\"array\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ru\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "BOOLEAN", "js_type": "string", "js_value": "\"array\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Foo bar\""}, {"js_key": "BOOLEAN", "js_type": "string", "js_value": "\"number\""}]}]}]}, {"details": {"endIndex": 1673, "endLine": 64, "hasReturn": true, "name": "filterLeaves", "paramCount": 1, "paramsAllSimple": false, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(filterLeaves)", "reachName": "filterLeaves", "reason": "UnsupportedParameterNotSimple", "startIndex": 1339, "startLine": 56, "type": "function"}, "function_code": "({startDate, endDate}) => (leave) => {\n  const sd = moment.utc(leave.get_start_leave_day().date);\n  const ed = moment.utc(leave.get_end_leave_day().date)\n  return (\n    (sd.isSameOrAfter(startDate, 'day') && sd.isSameOrBefore(endDate, 'day'))\n    ||\n    (ed.isSameOrAfter(startDate, 'day') && ed.isSameOrBefore(endDate, 'day'))\n  );\n}", "function_name": "filterLeaves", "function_parameters": [{"keys": ["startDate", "endDate"], "type": "object_pattern", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/Report.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "startDate", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "endDate", "js_type": "string", "js_value": "\"1-1-2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "startDate", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "endDate", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "startDate", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "endDate", "js_type": "string", "js_value": "\"20200101\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "startDate", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "endDate", "js_type": "string", "js_value": "\"01/13/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "startDate", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "endDate", "js_type": "string", "js_value": "\"20200101\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "startDate", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "endDate", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "startDate", "js_type": "string", "js_value": "\"01/01/2020\""}, {"js_key": "endDate", "js_type": "string", "js_value": "\"01/13/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "startDate", "js_type": "string", "js_value": "\"01/01/2020\""}, {"js_key": "endDate", "js_type": "string", "js_value": "\"20200101\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "startDate", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "endDate", "js_type": "string", "js_value": "\"20200101\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "startDate", "js_type": "string", "js_value": "\"01/01/2020\""}, {"js_key": "endDate", "js_type": "string", "js_value": "\"1-1-2020\""}]}]}]}, {"details": {"endIndex": 2466, "endLine": 88, "hasReturn": true, "name": "leaveIntoObject", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(leaveIntoObject)", "reachName": "leaveIntoObject", "reason": "Valid", "startIndex": 1700, "startLine": 66, "type": "function"}, "function_code": "(leave) => {\n\n  const dateFormat = 'YYYY-MM-DD';\n\n  const Leave = leave.sequelize.models.Leave;\n\n  const statusMap = {\n    [Leave.status_new()]:           'New',\n    [Leave.status_approved()]:      'Approved',\n    [Leave.status_rejected()]:      'Rejected',\n    [Leave.status_pended_revoke()]: 'Pended Revoke',\n    [Leave.status_canceled()]:      'Canceled',\n  };\n\n  return {\n    startDate:    moment.utc(leave.get_start_leave_day().date).format(dateFormat),\n    endDate:      moment.utc(leave.get_end_leave_day().date).format(dateFormat),\n    type:         leave.leave_type.name,\n    deductedDays: leave.get_deducted_days_number(),\n    approver:     (leave.approver ? leave.approver.full_name() : 'N/A'),\n    status:       statusMap[leave.status]||'Unknown',\n  };\n}", "function_name": "leaveIntoObject", "function_parameters": [{"name": "leave", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/Report.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "leave_type", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"string\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "date", "js_type": "string", "js_value": "\"01/01/2020\""}, {"js_key": "leave_type", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"object\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "leave_type", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"number\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "date", "js_type": "string", "js_value": "\"01/01/2020\""}, {"js_key": "leave_type", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"number\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "date", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "leave_type", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"array\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "date", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "leave_type", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"number\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "leave_type", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"object\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "date", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "leave_type", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"object\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "date", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "leave_type", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"string\""}]}]}]}]}, {"details": {"endIndex": 628, "endLine": 29, "hasReturn": true, "name": "__direct_export__", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 107, "startLine": 7, "type": "function"}, "function_code": "function(args){\n\n    if (! args ) args = {};\n\n    var params = args.params || {},\n        error_messages = [];\n\n    var req = {\n        session : {},\n        user    : {\n          company : {\n            get_default_date_format : function() {'YYYY-MM-DD'},\n            normalise_date : function(date) { return date; },\n          },\n        },\n        body : params,\n    };\n\n    // Make request be aware of flash messages\n    require('../../lib/middleware/flash_messages')(req,{locals:{}},function(){});\n\n    return req;\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/t/lib/mock_express_request.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "string", "js_value": "\"https://\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "string", "js_value": "\"www.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "string", "js_value": "\"https://ponicode.com?a=1&b=2\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "string", "js_value": "\"https://ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "string", "js_value": "\"https://ponicode.com?a=1#2#3\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "string", "js_value": "\"Www.PoniCode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "string", "js_value": "\"app.ponicode.com\""}]}]}]}, {"details": {"endIndex": 874, "endLine": 34, "hasReturn": false, "name": "LeaveDay", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 394, "startLine": 18, "type": "function"}, "function_code": "function LeaveDay(args) {\n\n  // Make sure all required data is provided\n  _.each(\n    ['date', 'day_part', 'sequelize', 'leave_type_id'],\n    function(property){\n      if (! _.has(args, property)) {\n        throw new Error('No mandatory '+property+' was provided');\n      }\n    }\n  );\n\n  this.date          = args.date;\n  this.day_part      = args.day_part;\n  this.sequelize     = args.sequelize;\n  this.morning_leave_type_id = this.afternoon_leave_type_id = args.leave_type_id;\n}", "function_name": "LeaveDay", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/leave_day.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave_type_id", "js_type": "string", "js_value": "\"object\""}, {"js_key": "day_part", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "sequelize", "js_type": "string", "js_value": "\"de\""}, {"js_key": "date", "js_type": "string", "js_value": "\"1-1-2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave_type_id", "js_type": "string", "js_value": "\"array\""}, {"js_key": "day_part", "js_type": "string", "js_value": "\"01/01/2020\""}, {"js_key": "sequelize", "js_type": "string", "js_value": "\"it\""}, {"js_key": "date", "js_type": "string", "js_value": "\"20200101\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave_type_id", "js_type": "string", "js_value": "\"number\""}, {"js_key": "day_part", "js_type": "string", "js_value": "\"01/01/2020\""}, {"js_key": "sequelize", "js_type": "string", "js_value": "\"it\""}, {"js_key": "date", "js_type": "string", "js_value": "\"01/13/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave_type_id", "js_type": "string", "js_value": "\"string\""}, {"js_key": "day_part", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "sequelize", "js_type": "string", "js_value": "\"en\""}, {"js_key": "date", "js_type": "string", "js_value": "\"01/13/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave_type_id", "js_type": "string", "js_value": "\"array\""}, {"js_key": "day_part", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "sequelize", "js_type": "string", "js_value": "\"it\""}, {"js_key": "date", "js_type": "string", "js_value": "\"01/13/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave_type_id", "js_type": "string", "js_value": "\"array\""}, {"js_key": "day_part", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "sequelize", "js_type": "string", "js_value": "\"cn\""}, {"js_key": "date", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave_type_id", "js_type": "string", "js_value": "\"number\""}, {"js_key": "day_part", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "sequelize", "js_type": "string", "js_value": "\"cn\""}, {"js_key": "date", "js_type": "string", "js_value": "\"1-1-2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave_type_id", "js_type": "string", "js_value": "\"number\""}, {"js_key": "day_part", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "sequelize", "js_type": "string", "js_value": "\"en\""}, {"js_key": "date", "js_type": "string", "js_value": "\"01/13/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave_type_id", "js_type": "string", "js_value": "\"number\""}, {"js_key": "day_part", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "sequelize", "js_type": "string", "js_value": "\"ar\""}, {"js_key": "date", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave_type_id", "js_type": "string", "js_value": "\"array\""}, {"js_key": "day_part", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "sequelize", "js_type": "string", "js_value": "\"ru\""}, {"js_key": "date", "js_type": "string", "js_value": "\"20200101\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave_type_id", "js_type": "string", "js_value": "\"number\""}, {"js_key": "day_part", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "sequelize", "js_type": "string", "js_value": "\"ru\""}, {"js_key": "date", "js_type": "string", "js_value": "\"20200101\""}]}]}]}, {"details": {"endIndex": 1276, "endLine": 52, "hasReturn": false, "name": "throw_user_error", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().throw_user_error", "reachNames": ["throw_user_error"], "reason": "Valid", "startIndex": 227, "startLine": 16, "type": "function"}, "function_code": "function throw_user_error(args) {\n  const validate_args = Joi.validate(args, schema_throw_user_error);\n\n  // Ensure all necesasry info was privided\n  if ( validate_args.error) {\n    // Tricky case here as we failed to rais exception, so log all data we have\n    // and still rais generic exception\n    console.log(\n      'throw_user_error got invalid parameters: '\n      + validate_args.annotate()\n    );\n    console.dir(args);\n    throw new Error('Failed to throw user errors');\n  }\n\n  let system_error_message,\n      user_error_message;\n\n  // Special case when user is lazy and specified generic error message to be\n  // used for system and customer level\n  if ( typeof args === 'string' ) {\n    system_error_message = user_error_message = args;\n  } else {\n    system_error_message = args.system_error;\n    user_error_message   = args.user_error;\n  }\n\n  let exception = new Error( system_error_message );\n\n  if ( user_error_message ) {\n    exception.user_error_message = user_error_message;\n  }\n\n  exception.tom_error = true;\n\n  throw exception;\n}", "function_name": "throw_user_error", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/error/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "system_error", "js_type": "boolean", "js_value": "true"}, {"js_key": "user_error", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "system_error", "js_type": "boolean", "js_value": "false"}, {"js_key": "user_error", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "system_error", "js_type": "boolean", "js_value": "false"}, {"js_key": "user_error", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "system_error", "js_type": "boolean", "js_value": "true"}, {"js_key": "user_error", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "system_error", "js_type": "boolean", "js_value": "true"}, {"js_key": "user_error", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "system_error", "js_type": "boolean", "js_value": "true"}, {"js_key": "user_error", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "system_error", "js_type": "boolean", "js_value": "false"}, {"js_key": "user_error", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}]}, {"details": {"endIndex": 1383, "endLine": 60, "hasReturn": true, "name": "extract_system_error_message", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().extract_system_error_message", "reachNames": ["extract_system_error_message"], "reason": "Valid", "startIndex": 1278, "startLine": 54, "type": "function"}, "function_code": "function extract_system_error_message(error) {\n  if ( ! error ) {\n    return null;\n  }\n\n  return error;\n}", "function_name": "extract_system_error_message", "function_parameters": [{"name": "error", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/error/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "null", "js_value": "null"}]}, {"input_values": [{"js_type": "number", "js_value": "NaN"}]}, {"input_values": [{"js_type": "undefined", "js_value": "undefined"}]}, {"input_values": [{"js_type": "number", "js_value": "429"}]}, {"input_values": [{"js_type": "number", "js_value": "404"}]}, {"input_values": [{"js_type": "number", "js_value": "0"}]}, {"input_values": [{"js_type": "boolean", "js_value": "false"}]}, {"input_values": [{"js_type": "number", "js_value": "200"}]}]}, {"details": {"endIndex": 1643, "endLine": 76, "hasReturn": true, "name": "extract_user_error_message", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().extract_user_error_message", "reachNames": ["extract_user_error_message"], "reason": "Valid", "startIndex": 1385, "startLine": 62, "type": "function"}, "function_code": "function extract_user_error_message(error) {\n  if ( ! error ) {\n    return null;\n  }\n\n  if (typeof error === 'string') {\n    return error;\n  }\n\n  if ( error.hasOwnProperty( 'user_error_message' )) {\n    return error.user_error_message;\n  }\n\n  return 'N/A';\n}", "function_name": "extract_user_error_message", "function_parameters": [{"name": "error", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/error/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "user_error_message", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user_error_message", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user_error_message", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user_error_message", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user_error_message", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user_error_message", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user_error_message", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}]}, {"details": {"endIndex": 1314, "endLine": 57, "hasReturn": true, "name": "__direct_export__", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 33, "startLine": 4, "type": "function"}, "function_code": "function(sequelize, DataTypes){\n\n  const Audit = sequelize.define(\"Audit\", {\n    entityType: {\n      type: DataTypes.STRING,\n      allowNull: false,\n      comment: 'Type of the entity which change is tracked. E.g. USER, LEAVE etc',\n    },\n    entityId: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      comment: 'ID of the entity defined by entityType',\n    },\n    attribute: {\n      type: DataTypes.STRING,\n      allowNull: false,\n      comment: 'Attribute of the entity which chnage is to be recorded',\n    },\n    oldValue: {\n      type: DataTypes.STRING,\n      allowNull: true,\n      comment: 'Old value converted to STRING',\n    },\n    newValue: {\n      type: DataTypes.STRING,\n      allowNull: true,\n      comment: 'New value converted to STRING',\n    },\n  }, {\n    underscored     : true,\n    freezeTableName : true,\n    timestamps      : true,\n    createdAt       : 'at',\n    updatedAt       : false,\n    tableName       : 'audit',\n\n    classMethods : {\n      associate : (models) => {\n        Audit.belongsTo(models.Company, {\n          as         : 'company',\n          foreignKey : 'companyId',\n        });\n\n        Audit.belongsTo(models.User, {\n          as: 'byUser',\n          foreignKey: 'byUserId',\n        });\n      },\n    },\n\n  });\n\n  return Audit;\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "sequelize", "type": "simple", "variadic": false}, {"name": "DataTypes", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/db/audit.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"foo bar\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Foo bar\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ru\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Welcome to Ponicode!\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"cn\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ar\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"PONICODE\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"cn\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Hello, world!\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ru\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"PONICODE\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Hello, world!\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Welcome to Ponicode!\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"PONICODE\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}]}, {"details": {"endIndex": 314, "endLine": 16, "hasReturn": true, "name": "commentLeave", "paramCount": 1, "paramsAllSimple": false, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().commentLeave", "reachNames": ["commentLeave"], "reason": "UnsupportedParameterNotSimple", "startIndex": 106, "startLine": 8, "type": "function"}, "function_code": "({leave, comment, companyId}) => {\n  return Models.Comment.create({\n    entityType: Models.Comment.getEntityTypeLeave(),\n    entityId: leave.id,\n    comment,\n    companyId,\n    byUserId: leave.userId,\n  });\n}", "function_name": "commentLeave", "function_parameters": [{"keys": ["leave", "comment", "companyId"], "type": "object_pattern", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/comment.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}, {"js_key": "userId", "js_type": "string", "js_value": "\"ponicode123\""}]}, {"js_key": "comment", "js_type": "string", "js_value": "\"+'\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_key": "userId", "js_type": "string", "js_value": "\"poni-code\""}]}, {"js_key": "comment", "js_type": "string", "js_value": "\"-\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}, {"js_key": "userId", "js_type": "string", "js_value": "\"poni-code\""}]}, {"js_key": "comment", "js_type": "string", "js_value": "\"-\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}, {"js_key": "userId", "js_type": "string", "js_value": "\"ponicode\""}]}, {"js_key": "comment", "js_type": "string", "js_value": "\"-\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_key": "userId", "js_type": "string", "js_value": "\"poni-code\""}]}, {"js_key": "comment", "js_type": "string", "js_value": "\"*\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_key": "userId", "js_type": "string", "js_value": "\"123\""}]}, {"js_key": "comment", "js_type": "string", "js_value": "\"-\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_key": "userId", "js_type": "string", "js_value": "\"poni code\""}]}, {"js_key": "comment", "js_type": "string", "js_value": "\"-\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_key": "userId", "js_type": "string", "js_value": "\"poni code\""}]}, {"js_key": "comment", "js_type": "string", "js_value": "\"*\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_key": "userId", "js_type": "string", "js_value": "\"poni-code\""}]}, {"js_key": "comment", "js_type": "string", "js_value": "\"-\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_key": "userId", "js_type": "string", "js_value": "\"poni_code\""}]}, {"js_key": "comment", "js_type": "string", "js_value": "\"*\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}, {"js_key": "userId", "js_type": "string", "js_value": "\"poni code\""}]}, {"js_key": "comment", "js_type": "string", "js_value": "\"+'\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}]}, {"details": {"endIndex": 518, "endLine": 26, "hasReturn": true, "name": "getCommentsForLeave", "paramCount": 1, "paramsAllSimple": false, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().getCommentsForLeave", "reachNames": ["getCommentsForLeave"], "reason": "UnsupportedParameterNotSimple", "startIndex": 345, "startLine": 18, "type": "function"}, "function_code": "({leave}) => {\n  return Models.Comment.findAll({\n    raw: true,\n    where : {\n      entityType: Models.Comment.getEntityTypeLeave(),\n      entityId: leave.id,\n    },\n  });\n}", "function_name": "getCommentsForLeave", "function_parameters": [{"keys": ["leave"], "type": "object_pattern", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/comment.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}]}]}]}, {"details": {"endIndex": 416, "endLine": 21, "hasReturn": false, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 85, "startLine": 7, "type": "function"}, "function_code": "(queryInterface, Sequelize) => {\n\n    queryInterface.describeTable('Companies').then((attributes) => {\n\n      if (attributes.hasOwnProperty('carry_over')) {\n        return 1;\n      }\n\n      return queryInterface.addColumn(\n        'Companies',\n        'carry_over',\n        models.Company.attributes.carry_over\n      );\n    });\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20181213-carry-over-conf.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"details": {"endIndex": 536, "endLine": 25, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 427, "startLine": 23, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    return queryInterface.removeColumn('Companies', 'carry_over');\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20181213-carry-over-conf.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"details": {"endIndex": 420, "endLine": 22, "hasReturn": false, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 83, "startLine": 7, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n\n    queryInterface.describeTable('Users').then(function(attributes){\n\n      if (attributes.hasOwnProperty('auto_approve')) {\n        return 1;\n      }\n\n      return queryInterface.addColumn(\n        'Users',\n        'auto_approve',\n        models.User.attributes.auto_approve\n      );\n    });\n\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20170530-add_auto_approve_flag_to_user.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"details": {"endIndex": 538, "endLine": 26, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 431, "startLine": 24, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    return queryInterface.removeColumn('Users', 'auto_approve');\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20170530-add_auto_approve_flag_to_user.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"details": {"endIndex": 1824, "endLine": 88, "hasReturn": true, "name": "__direct_export__", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 1739, "startLine": 86, "type": "function"}, "function_code": "function(args){\n  return args.driver.call(function(){return user_info_func(args)});\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/t/lib/user_info.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/folder/\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"/path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/file.ext\""}]}]}, {"details": {"endIndex": 874, "endLine": 34, "hasReturn": false, "name": "__direct_export__", "paramCount": 3, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 511, "startLine": 17, "type": "function"}, "function_code": "function(req, res, next){\n\n   res.redirect_with_session = function(a,b){\n\n        if (arguments.length === 2) {\n            req.session.save(function(){\n                res.redirect(a,b);\n            });\n        } else {\n            req.session.save(function(){\n                res.redirect(a);\n            });\n        }\n        return true;\n    };\n\n    next();\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "req", "type": "simple", "variadic": false}, {"name": "res", "type": "simple", "variadic": false}, {"name": "next", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/middleware/session_aware_redirect.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com?a=1&b=2\""}, {"js_type": "object", "js_value": [{"js_key": "redirect_with_session", "js_type": "boolean", "js_value": "false"}]}, {"js_type": "string", "js_value": "\"Florida\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com?a=1#2#3\""}, {"js_type": "object", "js_value": [{"js_key": "redirect_with_session", "js_type": "boolean", "js_value": "false"}]}, {"js_type": "string", "js_value": "\"Abruzzo\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"ponicode.com\""}, {"js_type": "object", "js_value": [{"js_key": "redirect_with_session", "js_type": "boolean", "js_value": "true"}]}, {"js_type": "string", "js_value": "\"Abruzzo\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"app.ponicode.com\""}, {"js_type": "object", "js_value": [{"js_key": "redirect_with_session", "js_type": "boolean", "js_value": "false"}]}, {"js_type": "string", "js_value": "\"Abruzzo\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"ponicode.com\""}, {"js_type": "object", "js_value": [{"js_key": "redirect_with_session", "js_type": "boolean", "js_value": "true"}]}, {"js_type": "string", "js_value": "\"Florida\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com/jobs\""}, {"js_type": "object", "js_value": [{"js_key": "redirect_with_session", "js_type": "boolean", "js_value": "false"}]}, {"js_type": "string", "js_value": "\"Abruzzo\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"Www.PoniCode.com\""}, {"js_type": "object", "js_value": [{"js_key": "redirect_with_session", "js_type": "boolean", "js_value": "false"}]}, {"js_type": "string", "js_value": "\"Florida\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"ponicode.com\""}, {"js_type": "object", "js_value": [{"js_key": "redirect_with_session", "js_type": "boolean", "js_value": "true"}]}, {"js_type": "string", "js_value": "\"Alabama\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"www.ponicode.com\""}, {"js_type": "object", "js_value": [{"js_key": "redirect_with_session", "js_type": "boolean", "js_value": "true"}]}, {"js_type": "string", "js_value": "\"\\u00cele-de-France\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"Www.PoniCode.com\""}, {"js_type": "object", "js_value": [{"js_key": "redirect_with_session", "js_type": "boolean", "js_value": "false"}]}, {"js_type": "string", "js_value": "\"\\u00cele-de-France\""}]}]}, {"details": {"endIndex": 3374, "endLine": 89, "hasReturn": true, "name": "check_teamview", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(check_teamview)", "reachName": "check_teamview", "reason": "Valid", "startIndex": 2111, "startLine": 50, "type": "function"}, "function_code": "function check_teamview(data, emails){\n\n  return open_page_func({\n    url    : application_host + 'calendar/teamview/',\n    driver : data.driver,\n  })\n  .then(function(data){\n    var promise_to_check = data.driver\n      .findElements(By.css( 'tr.teamview-user-list-row > td.left-column-cell' ))\n\n      // Make sure that number of users is as expected\n      .then(function(elements){\n\n        expect(elements.length).to.be.equal( emails.length );\n\n        return Promise.all(_.map(elements, function(el){ return el.getText();  }));\n      })\n\n      // Make sure that users are actually those as expected\n      .then(function(full_names){\n\n        // The idea is to extract unique tokens from provided emails\n        var tokens_from_emails = _.map(emails, function(email){\n          return email.substring(0, email.lastIndexOf(\"@\"));\n        }).sort();\n\n        // ... extract unique tokens from full names on the page\n        var tokens_from_name = _.map(full_names, function(name){\n          return name.substring(4, name.lastIndexOf(\" \"));\n        }).sort();\n\n        // ... and make sure that they are matched\n        expect( tokens_from_emails ).to.be.eql(tokens_from_name);\n\n        return Promise.resolve(data);\n      });\n\n    return promise_to_check;\n  });\n}", "function_name": "check_teamview", "function_parameters": [{"name": "data", "type": "simple", "variadic": false}, {"name": "emails", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/t/integration/team_view/basic_wall_chart.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_type": "string", "js_value": "\"\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"details": {"endIndex": 1268, "endLine": 60, "hasReturn": true, "name": "__direct_export__", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 80, "startLine": 7, "type": "function"}, "function_code": "function(sequelize, DataTypes){\n  var EmailAudit = sequelize.define(\"EmailAudit\", {\n    email : {\n      type      : DataTypes.STRING,\n      allowNull : false,\n    },\n    subject : {\n      type      : DataTypes.TEXT,\n      allowNull : false,\n    },\n    body : {\n      type      : DataTypes.TEXT,\n      allowNull : false,\n    },\n  },{\n    underscored     : true,\n    freezeTableName : true,\n    timestamps      : true,\n    createdAt       : 'created_at',\n    updatedAt       : false,\n    indexes : [{\n      fields : [ 'created_at' ],\n    },{\n      fields : [ 'user_id' ],\n    }],\n\n    classMethods : {\n      associate : function(models) {\n\n        EmailAudit.belongsTo(models.Company, {\n          as         : 'company',\n          foreignKey : 'company_id',\n        });\n\n\n        EmailAudit.belongsTo(models.User, {\n          as         : 'user',\n          foreignKey : 'user_id',\n        });\n      },\n    },\n\n    instanceMethods : {\n      // Present the email body as a text, strips off any html tags etc\n      //\n      body_as_text : function(){\n        return this.body.indexOf('DOCTYPE') > 0 ? htmlToText.fromString(this.body) : this.body;\n      },\n    },\n\n  });\n\n  return EmailAudit;\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "sequelize", "type": "simple", "variadic": false}, {"name": "DataTypes", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/db/email_audit.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "TEXT", "js_type": "string", "js_value": "\"function log(code) {\\n        var args = [];\\n        for (var _i = 1; _i < arguments.length; _i++) {\\n            args[_i - 1] = arguments[_i];\\n        }\\n        console.log(utils.tr.apply(null, arguments));\\n    }\\n\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"PONICODE\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "TEXT", "js_type": "string", "js_value": "\"function readToken_lt_gt(code) {\\n\\t      // '<>'\\n\\t      var next = this.input.charCodeAt(this.state.pos + 1);\\n\\t      var size = 1;\\n\\t\\n\\t      if (next === code) {\\n\\t        size = code === 62 && this.input.charCodeAt(this.state.pos + 2) === 62 ? 3 : 2;\\n\\t        if (this.input.charCodeAt(this.state.pos + size) === 61) return this.finishOp(_types.types.assign, size + 1);\\n\\t        return this.finishOp(_types.types.bitShift, size);\\n\\t      }\\n\\t\\n\\t      if (next === 33 && code === 60 && this.input.charCodeAt(this.state.pos + 2) === 45 && this.input.charCodeAt(this.state.pos + 3) === 45) {\\n\\t        if (this.inModule) this.unexpected();\\n\\t        // `<!--`, an XML-style comment that should be interpreted as a line comment\\n\\t        this.skipLineComment(4);\\n\\t        this.skipSpace();\\n\\t        return this.nextToken();\\n\\t      }\\n\\t\\n\\t      if (next === 61) {\\n\\t        // <= | >=\\n\\t        size = 2;\\n\\t      }\\n\\t\\n\\t      return this.finishOp(_types.types.relational, size);\\n\\t    }\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Hello, world!\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "TEXT", "js_type": "string", "js_value": "\"function unescape(code) {\\n        return code.replace(/\\\\\\\\('|\\\\\\\\)/g, \\\"$1\\\").replace(/[\\\\r\\\\t\\\\n]/g, \\\" \\\");\\n    }\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Foo bar\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"fr\""}, {"js_type": "object", "js_value": [{"js_key": "TEXT", "js_type": "string", "js_value": "\"function substr(start, length) {\\n        return string_substr.call(\\n            this,\\n            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,\\n            length\\n        );\\n    }\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Hello, world!\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "TEXT", "js_type": "string", "js_value": "\"function(code) {\\n\\t\\t\\t\\treturn I.mode === 'client' || !Basic.arrayDiff(code, [200, 404]);\\n\\t\\t\\t}\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Foo bar\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "TEXT", "js_type": "string", "js_value": "\"function(code) {\\n\\t\\t\\t\\treturn I.mode === 'client' || !Basic.arrayDiff(code, [200, 404]);\\n\\t\\t\\t}\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"foo bar\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"fr\""}, {"js_type": "object", "js_value": [{"js_key": "TEXT", "js_type": "string", "js_value": "\"function log(code) {\\n        var args = [];\\n        for (var _i = 1; _i < arguments.length; _i++) {\\n            args[_i - 1] = arguments[_i];\\n        }\\n        console.log(utils.tr.apply(null, arguments));\\n    }\\n\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "TEXT", "js_type": "string", "js_value": "\"function substr(start, length) {\\n        return string_substr.call(\\n            this,\\n            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,\\n            length\\n        );\\n    }\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Hello, world!\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "TEXT", "js_type": "string", "js_value": "\"function unescape(code) {\\n        return code.replace(/\\\\\\\\('|\\\\\\\\)/g, \\\"$1\\\").replace(/[\\\\r\\\\t\\\\n]/g, \\\" \\\");\\n    }\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"PONICODE\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "TEXT", "js_type": "string", "js_value": "\"function substr(start, length) {\\n        return string_substr.call(\\n            this,\\n            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,\\n            length\\n        );\\n    }\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Welcome to Ponicode!\""}]}]}]}, {"details": {"endIndex": 810, "endLine": 33, "hasReturn": false, "name": "prepare_user_for_session", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(prepare_user_for_session)", "reachName": "prepare_user_for_session", "reason": "Valid", "startIndex": 558, "startLine": 22, "type": "function"}, "function_code": "function prepare_user_for_session(args) {\n  var user = args.user,\n      done = args.done;\n\n  user.maybe_activate()\n    .then(function(user){\n      return user.reload_with_session_details();\n    })\n    .then(function(){\n      done(null, user);\n    });\n}", "function_name": "prepare_user_for_session", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/passport/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"path/to/file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/folder/\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"/path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"./path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}, {"input_values": [{"js_type": "string", "js_value": "\".\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}]}, {"details": {"endIndex": 2260, "endLine": 89, "hasReturn": false, "name": "authenticate_user", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(authenticate_user)", "reachName": "authenticate_user", "reason": "Valid", "startIndex": 999, "startLine": 40, "type": "function"}, "function_code": "function authenticate_user(args){\n\n  var user = args.user,\n  password = args.password,\n  done     = args.done,\n  email    = user.email;\n\n  // In case of LDAP authentification connect the LDAP server\n  if ( user.company.ldap_auth_enabled ) {\n\n// email = 'euler@ldap.forumsys.com'; password = 'password'; // TODO remove\n    Promise.resolve( user.company.get_ldap_server() )\n      .then(function(ldap_server){\n\n      ldap_server.authenticate(email, password, function (err, u) {\n        if (err) {\n          console.log(\"LDAP auth error: %s\", err);\n          return done(null, false);\n        }\n        prepare_user_for_session({\n          user : user,\n          done : done,\n        });\n      });\n\n      ldap_server.close();\n    })\n    .catch(function(error){\n      console.error('Failed while trying to deal with LDAP server with error: %s', error);\n\n      done(null, false);\n    });\n\n  // Provided password is correct\n  } else if (user.is_my_password(password)) {\n\n    prepare_user_for_session({\n      user : user,\n      done : done,\n    });\n\n  // User exists but provided password does not match\n  } else {\n      console.error(\n        'When login user entered existsing email ' +email+\n        ' but incorrect password'\n      );\n      done(null, false);\n  }\n}", "function_name": "authenticate_user", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/passport/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode\""}, {"js_key": "company", "js_type": "object", "js_value": [{"js_key": "ldap_auth_enabled", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"ponicode.com\""}, {"js_key": "company", "js_type": "object", "js_value": [{"js_key": "ldap_auth_enabled", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"1user@ponicode.com\""}, {"js_key": "company", "js_type": "object", "js_value": [{"js_key": "ldap_auth_enabled", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "company", "js_type": "object", "js_value": [{"js_key": "ldap_auth_enabled", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "company", "js_type": "object", "js_value": [{"js_key": "ldap_auth_enabled", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}, {"js_key": "company", "js_type": "object", "js_value": [{"js_key": "ldap_auth_enabled", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}, {"js_key": "company", "js_type": "object", "js_value": [{"js_key": "ldap_auth_enabled", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"ponicode.com\""}, {"js_key": "company", "js_type": "object", "js_value": [{"js_key": "ldap_auth_enabled", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user.ponicode.com\""}, {"js_key": "company", "js_type": "object", "js_value": [{"js_key": "ldap_auth_enabled", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_key": "company", "js_type": "object", "js_value": [{"js_key": "ldap_auth_enabled", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "user", "js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "company", "js_type": "object", "js_value": [{"js_key": "ldap_auth_enabled", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}]}]}]}, {"details": {"endIndex": 3438, "endLine": 135, "hasReturn": false, "name": "strategy_handler", "paramCount": 3, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(strategy_handler)", "reachName": "strategy_handler", "reason": "Valid", "startIndex": 2262, "startLine": 91, "type": "function"}, "function_code": "function strategy_handler(email, password, done) {\n\n  // Normalize email to be in lower case\n  email = email.toLowerCase();\n\n  model.User\n    .find_by_email( email )\n    .then(function(user){\n\n      // Case when no user for provided email\n      if ( ! user ) {\n        console.error(\n          'At login: failed to find user with provided email %s', email\n        );\n\n        // We need to abort the execution of current callback function\n        // hence the return before calling \"done\" callback\n        return done(null, false);\n      }\n\n      // Athenticate user by provided password\n      user.getCompany()\n        .then(function(company){\n\n          // We need to have company for user fetchef dow the line so query it now\n          user.company = company;\n\n          authenticate_user({\n            user     : user,\n            password : password,\n            done     : done,\n          });\n        });\n    })\n\n    // there was unknown error when trying to retrieve user object\n    .catch(function(error){\n      console.error(\n        'At login: unknown error when trying to login in as %s. Error: %s',\n        email, error\n      );\n\n      done(null, false);\n    });\n}", "function_name": "strategy_handler", "function_parameters": [{"name": "email", "type": "simple", "variadic": false}, {"name": "password", "type": "simple", "variadic": false}, {"name": "done", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/passport/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_type": "string", "js_value": "\".Ponicode53\""}, {"js_type": "string", "js_value": "\"callback detected, not supported yet\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_type": "string", "js_value": "\"$p3onyycat\""}, {"js_type": "string", "js_value": "\"callback detected, not supported yet\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"USEr1+user2@ponicoDE.cOm\""}, {"js_type": "string", "js_value": "\".Ponicode53\""}, {"js_type": "string", "js_value": "\"callback detected, not supported yet\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_type": "string", "js_value": "\"!Lov3MyPianoPony\""}, {"js_type": "string", "js_value": "\"callback detected, not supported yet\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_type": "string", "js_value": "\"!ush3r\""}, {"js_type": "string", "js_value": "\"callback detected, not supported yet\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"ponicode.com\""}, {"js_type": "string", "js_value": "\"$p3onyycat\""}, {"js_type": "string", "js_value": "\"callback detected, not supported yet\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"USER1+USER2@PONICODE.COM\""}, {"js_type": "string", "js_value": "\"1Ki77y\""}, {"js_type": "string", "js_value": "\"callback detected, not supported yet\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"user.ponicode.com\""}, {"js_type": "string", "js_value": "\".Ponicode53\""}, {"js_type": "string", "js_value": "\"callback detected, not supported yet\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_type": "string", "js_value": "\"$p3onyycat\""}, {"js_type": "string", "js_value": "\"callback detected, not supported yet\""}]}]}, {"details": {"endIndex": 540, "endLine": 22, "hasReturn": true, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 83, "startLine": 7, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n\n    return queryInterface.describeTable('user_allowance_adjustment')\n      .then(function(attributes){\n\n        if (attributes.hasOwnProperty('carried_over_allowance')) {\n          return 1;\n        }\n\n        return queryInterface.addColumn(\n          'user_allowance_adjustment',\n          'carried_over_allowance',\n          models.UserAllowanceAdjustment.attributes.carried_over_allowance\n        );\n      });\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20171222-add-carry-over-allowance-column.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"details": {"endIndex": 695, "endLine": 27, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 551, "startLine": 24, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    return queryInterface\n      .removeColumn('user_allowance_adjustment', 'carried_over_allowance');\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20171222-add-carry-over-allowance-column.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"details": {"endIndex": 664, "endLine": 25, "hasReturn": true, "name": "as_date_formatted", "paramCount": 3, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(as_date_formatted)", "reachName": "as_date_formatted", "reason": "Valid", "startIndex": 156, "startLine": 9, "type": "function"}, "function_code": "function(date_str, format, options) {\n\n  if (! date_str) return '';\n\n  if ( ! format ) {\n    format = get_current_format( options );\n  }\n\n  // Special case when we have to take time zone into consideration\n  // when printing date (usually it is needed for those dates recorded\n  // automatically as UTC time stampts)\n  if ( options.tom_take_timezone_into_consideration ) {\n    return moment_tz.utc(date_str).tz( get_timezone( options ) ).format( format );\n  }\n\n  return moment.utc(date_str).format(format);\n}", "function_name": "as_date_formatted", "function_parameters": [{"name": "date_str", "type": "simple", "variadic": false}, {"name": "format", "type": "simple", "variadic": false}, {"name": "options", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/view/helpers.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\""}, {"js_type": "string", "js_value": "\"01:04:03\""}, {"js_type": "object", "js_value": [{"js_key": "tom_take_timezone_into_consideration", "js_type": "boolean", "js_value": "true"}]}]}, {"input_values": [{"js_type": "boolean", "js_value": "false"}, {"js_type": "number", "js_value": "0"}, {"js_type": "object", "js_value": [{"js_key": "tom_take_timezone_into_consideration", "js_type": "boolean", "js_value": "false"}]}]}, {"input_values": [{"js_type": "undefined", "js_value": "undefined"}, {"js_type": "undefined", "js_value": "undefined"}, {"js_type": "object", "js_value": [{"js_key": "tom_take_timezone_into_consideration", "js_type": "boolean", "js_value": "false"}]}]}, {"input_values": [{"js_type": "undefined", "js_value": "undefined"}, {"js_type": "string", "js_value": "\"2017-09-29T19:01:00.000\""}, {"js_type": "object", "js_value": [{"js_key": "tom_take_timezone_into_consideration", "js_type": "boolean", "js_value": "true"}]}]}, {"input_values": [{"js_type": "null", "js_value": "null"}, {"js_type": "number", "js_value": "NaN"}, {"js_type": "object", "js_value": [{"js_key": "tom_take_timezone_into_consideration", "js_type": "boolean", "js_value": "false"}]}]}, {"input_values": [{"js_type": "number", "js_value": "NaN"}, {"js_type": "string", "js_value": "\"2017-09-29T23:01:00.000Z\""}, {"js_type": "object", "js_value": [{"js_key": "tom_take_timezone_into_consideration", "js_type": "boolean", "js_value": "false"}]}]}, {"input_values": [{"js_type": "boolean", "js_value": "false"}, {"js_type": "null", "js_value": "null"}, {"js_type": "object", "js_value": [{"js_key": "tom_take_timezone_into_consideration", "js_type": "boolean", "js_value": "false"}]}]}, {"input_values": [{"js_type": "null", "js_value": "null"}, {"js_type": "string", "js_value": "\"01:04:03\""}, {"js_type": "object", "js_value": [{"js_key": "tom_take_timezone_into_consideration", "js_type": "boolean", "js_value": "false"}]}]}, {"input_values": [{"js_type": "number", "js_value": "NaN"}, {"js_type": "string", "js_value": "\"\""}, {"js_type": "object", "js_value": [{"js_key": "tom_take_timezone_into_consideration", "js_type": "boolean", "js_value": "false"}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"\""}, {"js_type": "string", "js_value": "\"\""}, {"js_type": "object", "js_value": [{"js_key": "tom_take_timezone_into_consideration", "js_type": "boolean", "js_value": "true"}]}]}]}, {"details": {"endIndex": 1156, "endLine": 41, "hasReturn": true, "name": "get_property_from_options", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(get_property_from_options)", "reachName": "get_property_from_options", "reason": "Valid", "startIndex": 858, "startLine": 29, "type": "function"}, "function_code": "function(options, property_name){\n  var value;\n\n  if ( options.hasOwnProperty('data')\n    && options.data.hasOwnProperty('root')\n    && options.data.root.hasOwnProperty(property_name)\n    && options.data.root[property_name]\n  ) {\n    value = options.data.root[property_name];\n  }\n\n  return value;\n}", "function_name": "get_property_from_options", "function_parameters": [{"name": "options", "type": "simple", "variadic": false}, {"name": "property_name", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/view/helpers.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "data", "js_type": "object", "js_value": [{"js_key": "root", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"path/to/file.ext\""}, {"js_key": 1, "js_type": "string", "js_value": "\".\""}, {"js_key": 2, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}, {"js_key": 3, "js_type": "string", "js_value": "\".\""}, {"js_key": 4, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 5, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 6, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 7, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}, {"js_key": 8, "js_type": "string", "js_value": "\".\""}, {"js_key": 9, "js_type": "string", "js_value": "\"path/to/file.ext\""}]}]}]}, {"js_type": "string", "js_value": "\"string\""}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "data", "js_type": "object", "js_value": [{"js_key": "root", "js_type": "array", "js_value": []}]}]}, {"js_type": "string", "js_value": "\"object\""}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "data", "js_type": "object", "js_value": [{"js_key": "root", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\".\""}, {"js_key": 1, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}, {"js_key": 2, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 3, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 4, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}, {"js_key": 5, "js_type": "string", "js_value": "\"path/to/file.ext\""}, {"js_key": 6, "js_type": "string", "js_value": "\"/path/to/file\""}, {"js_key": 7, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 8, "js_type": "string", "js_value": "\"/path/to/file\""}, {"js_key": 9, "js_type": "string", "js_value": "\".\""}]}]}]}, {"js_type": "string", "js_value": "\"string\""}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "data", "js_type": "object", "js_value": [{"js_key": "root", "js_type": "array", "js_value": []}]}]}, {"js_type": "string", "js_value": "\"string\""}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "data", "js_type": "object", "js_value": [{"js_key": "root", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 1, "js_type": "string", "js_value": "\"/path/to/file\""}, {"js_key": 2, "js_type": "string", "js_value": "\"/path/to/file\""}]}]}]}, {"js_type": "string", "js_value": "\"string\""}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "data", "js_type": "object", "js_value": [{"js_key": "root", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 1, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 2, "js_type": "string", "js_value": "\"/path/to/file\""}]}]}]}, {"js_type": "string", "js_value": "\"number\""}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "data", "js_type": "object", "js_value": [{"js_key": "root", "js_type": "array", "js_value": []}]}]}, {"js_type": "string", "js_value": "\"array\""}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "data", "js_type": "object", "js_value": [{"js_key": "root", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 1, "js_type": "string", "js_value": "\".\""}, {"js_key": 2, "js_type": "string", "js_value": "\"path/to/file.ext\""}]}]}]}, {"js_type": "string", "js_value": "\"number\""}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "data", "js_type": "object", "js_value": [{"js_key": "root", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 1, "js_type": "string", "js_value": "\"/path/to/file\""}, {"js_key": 2, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 3, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}, {"js_key": 4, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 5, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 6, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 7, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 8, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}, {"js_key": 9, "js_type": "string", "js_value": "\"/path/to/file\""}]}]}]}, {"js_type": "string", "js_value": "\"number\""}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "data", "js_type": "object", "js_value": [{"js_key": "root", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 1, "js_type": "string", "js_value": "\"/path/to/file\""}, {"js_key": 2, "js_type": "string", "js_value": "\".\""}, {"js_key": 3, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 4, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 5, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}, {"js_key": 6, "js_type": "string", "js_value": "\"path/to/file.ext\""}, {"js_key": 7, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 8, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 9, "js_type": "string", "js_value": "\".\""}]}]}]}, {"js_type": "string", "js_value": "\"array\""}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "data", "js_type": "object", "js_value": [{"js_key": "root", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 1, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 2, "js_type": "string", "js_value": "\"/path/to/file\""}]}]}]}, {"js_type": "string", "js_value": "\"string\""}]}]}, {"details": {"endIndex": 1475, "endLine": 55, "hasReturn": true, "name": "get_current_format", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(get_current_format)", "reachName": "get_current_format", "reason": "Valid", "startIndex": 1184, "startLine": 43, "type": "function"}, "function_code": "function(options){\n\n  var format = 'YYYY-MM-DD';\n\n  var user = get_property_from_options(options, 'logged_user')\n    || get_property_from_options(options, 'user');\n\n  if ( user && user.hasOwnProperty('company') ) {\n    format = user.company.get_default_date_format();\n  }\n\n  return format;\n}", "function_name": "get_current_format", "function_parameters": [{"name": "options", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/view/helpers.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"path/to/folder/\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"./path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\".\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"/path/to/file\""}]}]}, {"details": {"endIndex": 1781, "endLine": 69, "hasReturn": true, "name": "get_timezone", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(get_timezone)", "reachName": "get_timezone", "reason": "Valid", "startIndex": 1497, "startLine": 57, "type": "function"}, "function_code": "function(options) {\n\n  let timezone = 'Europe/London';\n\n  var user = get_property_from_options(options, 'logged_user')\n    || get_property_from_options(options, 'user');\n\n  if ( user && user.hasOwnProperty('company') ) {\n    timezone = user.company.timezone;\n  }\n\n  return timezone;\n}", "function_name": "get_timezone", "function_parameters": [{"name": "options", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/view/helpers.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"/path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\".\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"./path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}]}, {"details": {"endIndex": 1027, "endLine": 35, "hasReturn": false, "name": "TeamView", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 193, "startLine": 11, "type": "function"}, "function_code": "function TeamView(args) {\n  var me = this;\n\n  this.user = args.user;\n  this.base_date = args.base_date || this.user.company.get_today();\n\n  // Optional parameters that override base date specify months range\n  // Team view is going to represent.\n  //\n  // The precision is up to month, that is any smaller part of dates\n  // (such as days, hours etc) are ignored.\n  //\n  // If those two parameters are missed - base_date is used to determine with month\n  // Team view would represent.\n  //\n  this.start_date = args.start_date;\n  this.end_date   = args.end_date;\n\n  if (args.start_date && args.end_date && args.base_date) {\n    Exception.throw_user_error({\n      user_error   : 'Failed to calculate team view',\n      system_error : 'TeamView could not be instanciated with start_date, end_data and base_date all defined.'\n    });\n  }\n}", "function_name": "TeamView", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/team_view.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "base_date", "js_type": "string", "js_value": "\"2017-09-29T23:01:00.000Z\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "user", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "start_date", "js_type": "string", "js_value": "\"01/13/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "base_date", "js_type": "string", "js_value": "\"2017-09-29T23:01:00.000Z\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "user", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "start_date", "js_type": "string", "js_value": "\"20200101\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "base_date", "js_type": "string", "js_value": "\"01:04:03\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "user", "js_type": "string", "js_value": "\"user.ponicode.com\""}, {"js_key": "start_date", "js_type": "string", "js_value": "\"1-1-2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "base_date", "js_type": "string", "js_value": "\"Mon Aug 03 12:45:00\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "user", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "start_date", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "base_date", "js_type": "string", "js_value": "\"Mon Aug 03 12:45:00\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "user", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "start_date", "js_type": "string", "js_value": "\"1-1-2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "base_date", "js_type": "string", "js_value": "\"2017-09-29T19:01:00.000\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "user", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}, {"js_key": "start_date", "js_type": "string", "js_value": "\"1-1-2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "base_date", "js_type": "string", "js_value": "\"2017-09-29T23:01:00.000Z\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "user", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "start_date", "js_type": "string", "js_value": "\"20200101\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "base_date", "js_type": "string", "js_value": "\"Mon Aug 03 12:45:00\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"01/01/2020\""}, {"js_key": "user", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "start_date", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "base_date", "js_type": "string", "js_value": "\"2017-09-29T19:01:00.000\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "user", "js_type": "string", "js_value": "\"1user@ponicode.com\""}, {"js_key": "start_date", "js_type": "string", "js_value": "\"20200101\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "base_date", "js_type": "string", "js_value": "\"01:04:03\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "user", "js_type": "string", "js_value": "\"1user@ponicode.com\""}, {"js_key": "start_date", "js_type": "string", "js_value": "\"01/13/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "base_date", "js_type": "string", "js_value": "\"2017-09-29T23:01:00.000Z\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "user", "js_type": "string", "js_value": "\"user@ponicode\""}, {"js_key": "start_date", "js_type": "string", "js_value": "\"20200101\""}]}]}]}, {"details": {"endIndex": 2918, "endLine": 109, "hasReturn": true, "name": "getUrlVars", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(getUrlVars)", "reachName": "getUrlVars", "reason": "Valid", "startIndex": 2630, "startLine": 98, "type": "function"}, "function_code": "function getUrlVars(url){\n  if ( ! url ) {\n    url = window.location.href;\n  }\n  var vars = {}, hash;\n  var hashes = url.slice( url.indexOf('?') + 1).split('&');\n  for (var i = 0; i < hashes.length; i++) {\n    hash = hashes[i].split('=');\n    vars[hash[0]] = hash[1];\n  }\n  return vars;\n}", "function_name": "getUrlVars", "function_parameters": [{"name": "url", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/public/js/global.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"Www.PoniCode.com\""}]}, {"input_values": [{"js_type": "undefined", "js_value": "undefined"}]}, {"input_values": [{"js_type": "number", "js_value": "0"}]}, {"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com/jobs\""}]}, {"input_values": [{"js_type": "boolean", "js_value": "false"}]}]}, {"details": {"endIndex": 3226, "endLine": 136, "hasReturn": true, "name": "__direct_export__", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 3135, "startLine": 134, "type": "function"}, "function_code": "function(args){\n  return args.driver.call(function(){return login_with_user_func(args)});\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/t/lib/login_with_user.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"path/to/folder/\""}]}, {"input_values": [{"js_type": "string", "js_value": "\".\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"./path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}]}, {"details": {"endIndex": 498, "endLine": 22, "hasReturn": true, "name": "__direct_export__", "paramCount": 3, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 172, "startLine": 9, "type": "function"}, "function_code": "function(req, res, next){\n\n    // User should be login to view settings pages\n    if ( !req.user ) {\n        return res.redirect_with_session(303, '/');\n    }\n\n    // Only Admin users allowed to deal with settings pages\n    if ( !req.user.is_admin() ) {\n        return res.redirect_with_session(303, '/');\n    }\n\n    next();\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "req", "type": "simple", "variadic": false}, {"name": "res", "type": "simple", "variadic": false}, {"name": "next", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/middleware/ensure_user_is_admin.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com\""}, {"js_type": "number", "js_value": "429"}, {"js_type": "string", "js_value": "\"Abruzzo\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com\""}, {"js_type": "number", "js_value": "400"}, {"js_type": "string", "js_value": "\"Florida\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com?a=1&b=2\""}, {"js_type": "number", "js_value": "200"}, {"js_type": "string", "js_value": "\"\\u00cele-de-France\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com?a=1#2#3\""}, {"js_type": "number", "js_value": "200"}, {"js_type": "string", "js_value": "\"\\u00cele-de-France\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com?a=1#2#3\""}, {"js_type": "number", "js_value": "200"}, {"js_type": "string", "js_value": "\"Florida\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"www.ponicode.com\""}, {"js_type": "number", "js_value": "200"}, {"js_type": "string", "js_value": "\"\\u00cele-de-France\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"app.ponicode.com\""}, {"js_type": "number", "js_value": "200"}, {"js_type": "string", "js_value": "\"Alabama\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com/jobs\""}, {"js_type": "number", "js_value": "400"}, {"js_type": "string", "js_value": "\"Florida\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"Www.PoniCode.com\""}, {"js_type": "number", "js_value": "429"}, {"js_type": "string", "js_value": "\"Abruzzo\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"Www.PoniCode.com\""}, {"js_type": "number", "js_value": "429"}, {"js_type": "string", "js_value": "\"Alabama\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"app.ponicode.com\""}, {"js_type": "number", "js_value": "400"}, {"js_type": "string", "js_value": "\"Florida\""}]}]}, {"details": {"endIndex": 2978, "endLine": 94, "hasReturn": true, "name": "commentLeaveIfNeeded", "paramCount": 1, "paramsAllSimple": false, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(commentLeaveIfNeeded)", "reachName": "commentLeaveIfNeeded", "reason": "UnsupportedParameterNotSimple", "startIndex": 2863, "startLine": 92, "type": "function"}, "function_code": "({leave,comment, companyId}) => {\n  return comment ? commentLeave({leave,comment,companyId}) : Promise.resolve();\n}", "function_name": "commentLeaveIfNeeded", "function_parameters": [{"keys": ["leave", "comment", "companyId"], "type": "object_pattern", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/leave/index.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "string", "js_value": "\"reply_click()\""}, {"js_key": "comment", "js_type": "string", "js_value": "\"foo bar\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "string", "js_value": "\"reply_click()\""}, {"js_key": "comment", "js_type": "string", "js_value": "\"Hello, world!\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "string", "js_value": "\"reply_click()\""}, {"js_key": "comment", "js_type": "string", "js_value": "\"PONICODE\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "string", "js_value": "\"reply_click()\""}, {"js_key": "comment", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "string", "js_value": "\"reply_click()\""}, {"js_key": "comment", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "string", "js_value": "\"reply_click()\""}, {"js_key": "comment", "js_type": "string", "js_value": "\"foo bar\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "string", "js_value": "\"reply_click()\""}, {"js_key": "comment", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "string", "js_value": "\"reply_click()\""}, {"js_key": "comment", "js_type": "string", "js_value": "\"Welcome to Ponicode!\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "string", "js_value": "\"reply_click()\""}, {"js_key": "comment", "js_type": "string", "js_value": "\"Foo bar\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "leave", "js_type": "string", "js_value": "\"reply_click()\""}, {"js_key": "comment", "js_type": "string", "js_value": "\"foo bar\""}, {"js_key": "companyId", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}]}, {"details": {"endIndex": 856, "endLine": 31, "hasReturn": true, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 116, "startLine": 8, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n\n    return queryInterface\n      .createTable(\n        models.UserAllowanceAdjustment.tableName,\n        models.UserAllowanceAdjustment.attributes\n      )\n      .then(() => queryInterface.describeTable('Users'))\n      .then(function(attributes){\n\n        if ( ! attributes.hasOwnProperty('adjustment')) {\n          return Promise.resolve();\n        }\n\n        let sql = 'INSERT INTO user_allowance_adjustment (year, adjustment, user_id, created_at) '\n          + 'SELECT 2017 AS year, adjustment as adjustment, id as user_id, date() || \\' \\' || time() as created_at '\n          + 'FROM users';\n\n        return queryInterface.sequelize.query( sql );\n      })\n\n      .then(() => Promise.resolve());\n\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20171219-allowance-adjustment-per-year.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"details": {"endIndex": 959, "endLine": 36, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 867, "startLine": 33, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    // No way back!\n    return Promise.resolve();\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20171219-allowance-adjustment-per-year.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"details": {"endIndex": 450, "endLine": 22, "hasReturn": true, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 83, "startLine": 7, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n\n    return queryInterface.describeTable('Companies')\n      .then(function(attributes){\n\n        if (attributes.hasOwnProperty('timezone')) {\n          return 1;\n        }\n\n        return queryInterface.addColumn(\n          'Companies',\n          'timezone',\n          models.Company.attributes.timezone\n        );\n      });\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20171228-add-time-zone-field-to-company.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"details": {"endIndex": 575, "endLine": 27, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 461, "startLine": 24, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    return queryInterface\n      .removeColumn('Companies', 'timezone');\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20171228-add-time-zone-field-to-company.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"details": {"endIndex": 439, "endLine": 21, "hasReturn": false, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 83, "startLine": 7, "type": "function"}, "function_code": "(queryInterface, Sequelize) => {\n\n    queryInterface.describeTable('Companies').then(attributes => {\n\n      if (attributes.hasOwnProperty('is_team_view_hidden')) {\n        return 1;\n      }\n\n      return queryInterface.addColumn(\n        'Companies',\n        'is_team_view_hidden',\n        models.Company.attributes.is_team_view_hidden\n      );\n    });\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20190629-add-is_team_view_hidden_field.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"details": {"endIndex": 549, "endLine": 24, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 450, "startLine": 23, "type": "function"}, "function_code": "(queryInterface, Sequelize) => queryInterface\n    .removeColumn('Companies', 'is_team_view_hidden')", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20190629-add-is_team_view_hidden_field.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"details": {"endIndex": 1826, "endLine": 64, "hasReturn": true, "name": "__direct_export__", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 1737, "startLine": 62, "type": "function"}, "function_code": "function(args){\n  return args.driver.call(function(){return check_booking_func(args)});\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/t/lib/check_booking_on_calendar.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"./path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}, {"input_values": [{"js_type": "string", "js_value": "\".\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/folder/\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/file.ext\""}]}]}, {"details": {"endIndex": 446, "endLine": 15, "hasReturn": true, "name": "getUserId", "paramCount": 1, "paramsAllSimple": false, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(getUserId)", "reachName": "getUserId", "reason": "UnsupportedParameterNotSimple", "startIndex": 296, "startLine": 12, "type": "function"}, "function_code": "({userId,email,driver}) => (!!userId)\n  ? bluebird.resolve(userId)\n  : userInfoFunc({email,driver})\n    .then(({user : {id}}) => bluebird.resolve(id))", "function_name": "getUserId", "function_parameters": [{"keys": ["userId", "email", "driver"], "type": "object_pattern", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/t/lib/set_user_to_start_at_the_beginning_of_the_year.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "userId", "js_type": "string", "js_value": "\"123\""}, {"js_key": "email", "js_type": "string", "js_value": "\"user.ponicode.com\""}, {"js_key": "driver", "js_type": "string", "js_value": "\"app.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "userId", "js_type": "number", "js_value": "0"}, {"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode\""}, {"js_key": "driver", "js_type": "string", "js_value": "\"https://ponicode.com/jobs\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "userId", "js_type": "string", "js_value": "\"\""}, {"js_key": "email", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}, {"js_key": "driver", "js_type": "string", "js_value": "\"www.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "userId", "js_type": "string", "js_value": "\"123\""}, {"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "driver", "js_type": "string", "js_value": "\"https://ponicode.com/jobs\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "userId", "js_type": "string", "js_value": "\"poni-code\""}, {"js_key": "email", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "driver", "js_type": "string", "js_value": "\"www.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "userId", "js_type": "string", "js_value": "\"123\""}, {"js_key": "email", "js_type": "string", "js_value": "\"user.ponicode.com\""}, {"js_key": "driver", "js_type": "string", "js_value": "\"Www.PoniCode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "userId", "js_type": "number", "js_value": "NaN"}, {"js_key": "email", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}, {"js_key": "driver", "js_type": "string", "js_value": "\"https://ponicode.com/jobs\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "userId", "js_type": "string", "js_value": "\"poni_code\""}, {"js_key": "email", "js_type": "string", "js_value": "\"ponicode.com\""}, {"js_key": "driver", "js_type": "string", "js_value": "\"www.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "userId", "js_type": "undefined", "js_value": "undefined"}, {"js_key": "email", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}, {"js_key": "driver", "js_type": "string", "js_value": "\"https://ponicode.com/jobs\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "userId", "js_type": "boolean", "js_value": "false"}, {"js_key": "email", "js_type": "string", "js_value": "\"ponicode.com\""}, {"js_key": "driver", "js_type": "string", "js_value": "\"https://ponicode.com?a=1#2#3\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "userId", "js_type": "string", "js_value": "\"poni_code\""}, {"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_key": "driver", "js_type": "string", "js_value": "\"app.ponicode.com\""}]}]}]}, {"details": {"endIndex": 763, "endLine": 29, "hasReturn": true, "name": "_promise_to_unfold_context", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(_promise_to_unfold_context)", "reachName": "_promise_to_unfold_context", "reason": "Valid", "startIndex": 574, "startLine": 23, "type": "function"}, "function_code": "function _promise_to_unfold_context(context) {\n  if (context.hasOwnProperty('user')){\n    return context.user.reload_with_session_details();\n  } else {\n    return bluebird.resolve(1);\n  }\n}", "function_name": "_promise_to_unfold_context", "function_parameters": [{"name": "context", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/email.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"RECEIVE_MESSAGE\""}, {"js_key": "message", "js_type": "string", "js_value": "\"Hello! How are you?\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"ADD_TODO\""}, {"js_key": "text", "js_type": "string", "js_value": "\"Build my first Redux app\""}]}]}]}, {"details": {"endIndex": 634, "endLine": 22, "hasReturn": true, "name": "getCurrentYear", "paramCount": 1, "paramsAllSimple": false, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(getCurrentYear)", "reachName": "getCurrentYear", "reason": "UnsupportedParameterNotSimple", "startIndex": 438, "startLine": 15, "type": "function"}, "function_code": "({req}) => {\n  const rawYear = req.query['year'] || req.body['year'];\n  return (\n    validator.isNumeric(rawYear)\n    ? moment.utc(rawYear, 'YYYY')\n    : req.user.company.get_today()\n  ).year();\n}", "function_name": "getCurrentYear", "function_parameters": [{"keys": ["req"], "type": "object_pattern", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/bankHolidays.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"1-1-2020\""}]}, {"js_key": "query", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"01/13/2020\""}]}, {"js_key": "query", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"01/01/2020\""}]}, {"js_key": "query", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"01/13/2020\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"20200101\""}]}, {"js_key": "query", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"20200101\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"01/01/2020\""}]}, {"js_key": "query", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"01/13/2020\""}]}, {"js_key": "query", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"1-1-2020\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"01/01/2020\""}]}, {"js_key": "query", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"20200101\""}]}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"01/01/2020\""}]}, {"js_key": "query", "js_type": "object", "js_value": [{"js_key": "year", "js_type": "string", "js_value": "\"1-1-2020\""}]}]}]}]}]}, {"details": {"endIndex": 2081, "endLine": 80, "hasReturn": true, "name": "promiseNewBankHoliday", "paramCount": 1, "paramsAllSimple": false, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(promiseNewBankHoliday)", "reachName": "promiseNewBankHoliday", "reason": "UnsupportedParameterNotSimple", "startIndex": 1708, "startLine": 63, "type": "function"}, "function_code": "({model, req, companyId}) => {\n\n  if (!validator.trim(req.body['name__new'])) {\n    return Promise.resolve(1);\n  }\n\n  const attributes = getAndValidateBankHoliday({\n    req,\n    id: 'new',\n    itemName : 'New Bank Holiday',\n  });\n\n  if ( req.session.flash_has_errors() ) {\n    return Promise.resolve(1);\n  }\n\n  return model.BankHoliday.create({...attributes, companyId});\n}", "function_name": "promiseNewBankHoliday", "function_parameters": [{"keys": ["model", "req", "companyId"], "type": "object_pattern", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/bankHolidays.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "name__new", "js_type": "string", "js_value": "\"object\""}]}]}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "model", "js_type": "string", "js_value": "\"user.ponicode.com\""}, {"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "name__new", "js_type": "string", "js_value": "\"number\""}]}]}, {"js_key": "companyId", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "name__new", "js_type": "string", "js_value": "\"string\""}]}]}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "name__new", "js_type": "string", "js_value": "\"number\""}]}]}, {"js_key": "companyId", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "name__new", "js_type": "string", "js_value": "\"object\""}]}]}, {"js_key": "companyId", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "name__new", "js_type": "string", "js_value": "\"string\""}]}]}, {"js_key": "companyId", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "name__new", "js_type": "string", "js_value": "\"number\""}]}]}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode\""}, {"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "name__new", "js_type": "string", "js_value": "\"array\""}]}]}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "model", "js_type": "string", "js_value": "\"ponicode.com\""}, {"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "name__new", "js_type": "string", "js_value": "\"string\""}]}]}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "name__new", "js_type": "string", "js_value": "\"object\""}]}]}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "name__new", "js_type": "string", "js_value": "\"number\""}]}]}, {"js_key": "companyId", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}]}, {"details": {"endIndex": 7578, "endLine": 249, "hasReturn": true, "name": "getAndValidateBankHoliday", "paramCount": 1, "paramsAllSimple": false, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(getAndValidateBankHoliday)", "reachName": "getAndValidateBankHoliday", "reason": "UnsupportedParameterNotSimple", "startIndex": 7005, "startLine": 226, "type": "function"}, "function_code": "({req, id, itemName}) => {\n\n  // Get user parameters\n  let name = validator.trim(req.body[`name__${id}`]),\n      date = validator.trim(req.body[`date__${id}`]);\n\n  // Nothing to validate, abort\n  if (!name && !date) {\n    return {};\n  }\n\n  // Validate provided parameters\n  //\n  // Note, we allow users to put whatever they want into the name.\n  // The XSS defence is in the templates\n\n  date = req.user.company.normalise_date( date );\n\n  if (!validator.isDate(date) ) {\n    req.session.flash_error(`New day for ${itemName} should be date`);\n  }\n\n  return { name, date };\n}", "function_name": "getAndValidateBankHoliday", "function_parameters": [{"keys": ["req", "id", "itemName"], "type": "object_pattern", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/bankHolidays.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "array", "js_value": []}]}, {"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}, {"js_key": "itemName", "js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "array", "js_value": []}]}, {"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}, {"js_key": "itemName", "js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"path/to/file.ext\""}, {"js_key": 1, "js_type": "string", "js_value": "\".\""}, {"js_key": 2, "js_type": "string", "js_value": "\"path/to/file.ext\""}, {"js_key": 3, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 4, "js_type": "string", "js_value": "\"path/to/file.ext\""}, {"js_key": 5, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 6, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 7, "js_type": "string", "js_value": "\"path/to/file.ext\""}, {"js_key": 8, "js_type": "string", "js_value": "\".\""}, {"js_key": 9, "js_type": "string", "js_value": "\"./path/to/file\""}]}]}, {"js_key": "id", "js_type": "string", "js_value": "\"myDIV\""}, {"js_key": "itemName", "js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 1, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 2, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}]}, {"js_key": "id", "js_type": "string", "js_value": "\"myDIV\""}, {"js_key": "itemName", "js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 1, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}, {"js_key": 2, "js_type": "string", "js_value": "\".\""}]}]}, {"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}, {"js_key": "itemName", "js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "array", "js_value": []}]}, {"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}, {"js_key": "itemName", "js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"path/to/file.ext\""}, {"js_key": 1, "js_type": "string", "js_value": "\"/path/to/file\""}, {"js_key": 2, "js_type": "string", "js_value": "\"path/to/file.ext\""}]}]}, {"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}, {"js_key": "itemName", "js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 1, "js_type": "string", "js_value": "\".\""}, {"js_key": 2, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}]}, {"js_key": "id", "js_type": "string", "js_value": "\"myDIV\""}, {"js_key": "itemName", "js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 1, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 2, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 3, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 4, "js_type": "string", "js_value": "\"path/to/file.ext\""}, {"js_key": 5, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 6, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 7, "js_type": "string", "js_value": "\"path/to/file.ext\""}, {"js_key": 8, "js_type": "string", "js_value": "\"/path/to/file\""}, {"js_key": 9, "js_type": "string", "js_value": "\".\""}]}]}, {"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}, {"js_key": "itemName", "js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "array", "js_value": []}]}, {"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}, {"js_key": "itemName", "js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 1, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 2, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 3, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 4, "js_type": "string", "js_value": "\"path/to/file.ext\""}, {"js_key": 5, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 6, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 7, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}, {"js_key": 8, "js_type": "string", "js_value": "\".\""}, {"js_key": 9, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}]}, {"js_key": "id", "js_type": "string", "js_value": "\"myDIV\""}, {"js_key": "itemName", "js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "array", "js_value": [{"js_key": 0, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 1, "js_type": "string", "js_value": "\".\""}, {"js_key": 2, "js_type": "string", "js_value": "\"./path/to/file\""}, {"js_key": 3, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}, {"js_key": 4, "js_type": "string", "js_value": "\"/path/to/file\""}, {"js_key": 5, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 6, "js_type": "string", "js_value": "\"/path/to/file\""}, {"js_key": 7, "js_type": "string", "js_value": "\"path/to/folder/\""}, {"js_key": 8, "js_type": "string", "js_value": "\"path/to/file.ext\""}, {"js_key": 9, "js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}]}, {"js_key": "id", "js_type": "string", "js_value": "\"myDIV\""}, {"js_key": "itemName", "js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}]}]}]}, {"details": {"endIndex": 778, "endLine": 35, "hasReturn": false, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 83, "startLine": 7, "type": "function"}, "function_code": "(queryInterface, Sequelize) => {\n\n    queryInterface.describeTable('Companies').then(attributes => {\n\n      if (attributes.hasOwnProperty('integration_api_token')) {\n        return 1;\n      }\n\n      return queryInterface.addColumn(\n        'Companies',\n        'integration_api_token',\n        models.Company.attributes.integration_api_token\n      );\n    });\n\n    queryInterface.describeTable('Companies').then(attributes => {\n\n      if (attributes.hasOwnProperty('integration_api_enabled')) {\n        return 1;\n      }\n\n      return queryInterface.addColumn(\n        'Companies',\n        'integration_api_enabled',\n        models.Company.attributes.integration_api_enabled\n      );\n    });\n\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20181119-integration-api-token-per-company.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"details": {"endIndex": 975, "endLine": 39, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 789, "startLine": 37, "type": "function"}, "function_code": "(queryInterface, Sequelize) => queryInterface\n    .removeColumn('Companies', 'integration_api_token')\n    .then(() => queryInterface.removeColumn('Companies', 'integration_api_enabled'))", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20181119-integration-api-token-per-company.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"details": {"endIndex": 3304, "endLine": 106, "hasReturn": true, "name": "leave_request_action", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(leave_request_action)", "reachName": "leave_request_action", "reason": "Valid", "startIndex": 817, "startLine": 29, "type": "function"}, "function_code": "function leave_request_action(args) {\n    var\n      current_action      = args.action,\n      leave_action_method = args.leave_action_method,\n      was_pended_revoke   = false;\n\n    return function(req, res){\n\n    var request_id = validator.trim( req.body['request'] );\n\n    if (!validator.isNumeric(request_id)){\n      req.session.flash_error('Failed to ' + current_action);\n    }\n\n    if ( req.session.flash_has_errors() ) {\n      console.error('Got validation errors on '+current_action+' request handler');\n\n      return res.redirect_with_session('../');\n    }\n\n    Promise.try(function(){\n      return req.user.promise_leaves_to_be_processed();\n    })\n    .then(function(leaves){\n       var leave_to_process = _.find(leaves, function(leave){\n          return String(leave.id) === String(request_id)\n            && (leave.is_new_leave() || leave.is_pended_revoke_leave());\n       });\n\n       if (! leave_to_process) {\n         throw new Error('Provided ID '+request_id\n           +'does not correspond to any leave requests to be '+current_action\n           +'ed for user ' + req.user.id\n          );\n       }\n\n       was_pended_revoke = leave_to_process.is_pended_revoke_leave();\n\n       return leave_to_process[leave_action_method]({ by_user : req.user });\n    })\n    .then(function(processed_leave){\n      return processed_leave.reload({\n        include : [\n          {model : req.app.get('db_model').User, as : 'user'},\n          {model : req.app.get('db_model').User, as : 'approver'},\n          {model : req.app.get('db_model').LeaveType, as : 'leave_type' },\n        ],\n      });\n    })\n    .then(function(processed_leave){\n\n      var Email = new EmailTransport();\n\n      return Email.promise_leave_request_decision_emails({\n        leave             : processed_leave,\n        action            : current_action,\n        was_pended_revoke : was_pended_revoke,\n      })\n      .then(function(){\n        return Promise.resolve( processed_leave);\n      });\n    })\n    .then(function(processed_leave){\n      req.session.flash_message('Request from '+processed_leave.user.full_name()\n          +' was processed');\n\n      return res.redirect_with_session('../');\n    })\n    .catch(function(error){\n      console.error('An error occurred when attempting to '+current_action\n        +' leave request '+request_id+' by user '+req.user.id+' Error: '+error\n      );\n      req.session.flash_error('Failed to '+current_action);\n      return res.redirect_with_session('../');\n    });\n  };\n\n}", "function_name": "leave_request_action", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/requests.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "action", "js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"RECEIVE_MESSAGE\""}, {"js_key": "message", "js_type": "string", "js_value": "\"Hello! How are you?\""}]}, {"js_key": "leave_action_method", "js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"ADD_TODO\""}, {"js_key": "text", "js_type": "string", "js_value": "\"Build my first Redux app\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "action", "js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"RECEIVE_MESSAGE\""}, {"js_key": "message", "js_type": "string", "js_value": "\"Hello! How are you?\""}]}, {"js_key": "leave_action_method", "js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"RECEIVE_MESSAGE\""}, {"js_key": "message", "js_type": "string", "js_value": "\"Hello! How are you?\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "action", "js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"ADD_TODO\""}, {"js_key": "text", "js_type": "string", "js_value": "\"Build my first Redux app\""}]}, {"js_key": "leave_action_method", "js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"ADD_TODO\""}, {"js_key": "text", "js_type": "string", "js_value": "\"Build my first Redux app\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "action", "js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"ADD_TODO\""}, {"js_key": "text", "js_type": "string", "js_value": "\"Build my first Redux app\""}]}, {"js_key": "leave_action_method", "js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"RECEIVE_MESSAGE\""}, {"js_key": "message", "js_type": "string", "js_value": "\"Hello! How are you?\""}]}]}]}]}, {"details": {"endIndex": 407, "endLine": 22, "hasReturn": false, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 83, "startLine": 7, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n\n    queryInterface.describeTable('Companies').then(function(attributes){\n\n      if (attributes.hasOwnProperty('mode')) {\n        return 1;\n      }\n\n      return queryInterface.addColumn(\n        'Companies',\n        'mode',\n        models.Company.attributes.mode\n      );\n    });\n\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20180102-company-mode.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"details": {"endIndex": 521, "endLine": 26, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 418, "startLine": 24, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    return queryInterface.removeColumn('Companies', 'mode');\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20180102-company-mode.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"details": {"endIndex": 1223, "endLine": 44, "hasReturn": true, "name": "calculateCarryOverAllowance", "paramCount": 1, "paramsAllSimple": false, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().calculateCarryOverAllowance", "reachNames": ["calculateCarryOverAllowance"], "reason": "UnsupportedParameterNotSimple", "startIndex": 121, "startLine": 8, "type": "function"}, "function_code": "({users}) => {\n\n  const\n    yearFrom = moment.utc().add(-1, 'y').year(),\n    yearTo = moment.utc().year();\n\n  let flow = Promise.resolve(users);\n\n  flow = flow.then(users => Promise.map(\n    users,\n    user => {\n      let carryOver;\n      return Promise.resolve(user.getCompany().then(c => carryOver = c.carry_over))\n        .then(() => user.reload_with_leave_details({year:moment.utc(yearFrom, 'YYYY')}))\n        .then(user => user.promise_allowance({\n          year: moment.utc(yearFrom, 'YYYY'),\n          now: moment.utc(yearFrom, 'YYYY').endOf('year'),\n          forceNow: true,\n        }))\n        .then(allowance => {\n\n          const carried_over_allowance = (carryOver === 0)\n            ? 0\n            : Math.min(allowance.number_of_days_available_in_allowance, carryOver);\n\n          return user.promise_to_update_carried_over_allowance({\n            carried_over_allowance,\n            year: yearTo,\n          });\n        })\n        .then(() => console.log(`Carried over unused allowance ${yearFrom} -> ${yearTo} for user ${user.id}`));\n    },\n    {concurrency : 1}\n  ));\n\n  return flow;\n}", "function_name": "calculateCarryOverAllowance", "function_parameters": [{"keys": ["users"], "type": "object_pattern", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/calculateCarryOverAllowance.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "users", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "users", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "users", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "users", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "users", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "users", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}]}, {"details": {"endIndex": 3478, "endLine": 111, "hasReturn": true, "name": "render_allowancebytime", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(render_allowancebytime)", "reachName": "render_allowancebytime", "reason": "Valid", "startIndex": 2474, "startLine": 87, "type": "function"}, "function_code": "function render_allowancebytime(args) {\n  let\n    req               = args.req,\n    res               = args.res,\n    team_view_details = args.team_view_details,\n    company           = args.company,\n    start_date        = args.start_date,\n    end_date          = args.end_date;\n\n    return Promise\n      .try(() => req.query['as-csv']\n        ? render_allowancebytime_as_csv(args)\n        : res.render('report/allowancebytime', {\n          users_and_leaves    : team_view_details.users_and_leaves,\n          related_departments : team_view_details.related_departments,\n          current_department  : team_view_details.current_department,\n          company             : company,\n          start_date_str      : start_date.format('YYYY-MM'),\n          end_date_str        : end_date.format('YYYY-MM'),\n          start_date_obj      : start_date,\n          end_date_obj        : end_date,\n          same_month          : (start_date.format('YYYYMM') === end_date.format('YYYYMM')),\n        })\n      );\n}", "function_name": "render_allowancebytime", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/reports.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "query", "js_type": "object", "js_value": [{"js_key": "as-csv", "js_type": "string", "js_value": "\"01:04:03\""}]}]}, {"js_key": "team_view_details", "js_type": "object", "js_value": [{"js_key": "related_departments", "js_type": "boolean", "js_value": "false"}, {"js_key": "users_and_leaves", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}, {"js_key": "current_department", "js_type": "string", "js_value": "\"Saint-Denis\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"\\u8427\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "query", "js_type": "object", "js_value": [{"js_key": "as-csv", "js_type": "string", "js_value": "\"Mon Aug 03 12:45:00\""}]}]}, {"js_key": "team_view_details", "js_type": "object", "js_value": [{"js_key": "related_departments", "js_type": "boolean", "js_value": "true"}, {"js_key": "users_and_leaves", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "current_department", "js_type": "string", "js_value": "\"Paris\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"\\u8427\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "query", "js_type": "object", "js_value": [{"js_key": "as-csv", "js_type": "string", "js_value": "\"01:04:03\""}]}]}, {"js_key": "team_view_details", "js_type": "object", "js_value": [{"js_key": "related_departments", "js_type": "boolean", "js_value": "false"}, {"js_key": "users_and_leaves", "js_type": "string", "js_value": "\"user@ponicode.com\""}, {"js_key": "current_department", "js_type": "string", "js_value": "\"Roma\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"Jean-Philippe\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "query", "js_type": "object", "js_value": [{"js_key": "as-csv", "js_type": "string", "js_value": "\"2017-09-29T19:01:00.000\""}]}]}, {"js_key": "team_view_details", "js_type": "object", "js_value": [{"js_key": "related_departments", "js_type": "boolean", "js_value": "false"}, {"js_key": "users_and_leaves", "js_type": "string", "js_value": "\"user@ponicode\""}, {"js_key": "current_department", "js_type": "string", "js_value": "\"\\u0627\\u0644\\u0631\\u0650\\u0651\\u0628\\u064e\\u0627\\u0637\\u200e\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"\\u062e\\u0644\\u064a\\u0644\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "query", "js_type": "object", "js_value": [{"js_key": "as-csv", "js_type": "string", "js_value": "\"2017-09-29T19:01:00.000\""}]}]}, {"js_key": "team_view_details", "js_type": "object", "js_value": [{"js_key": "related_departments", "js_type": "boolean", "js_value": "true"}, {"js_key": "users_and_leaves", "js_type": "string", "js_value": "\"ponicode.com\""}, {"js_key": "current_department", "js_type": "string", "js_value": "\"\\u5317\\u4eac\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"George\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "query", "js_type": "object", "js_value": [{"js_key": "as-csv", "js_type": "string", "js_value": "\"Mon Aug 03 12:45:00\""}]}]}, {"js_key": "team_view_details", "js_type": "object", "js_value": [{"js_key": "related_departments", "js_type": "boolean", "js_value": "true"}, {"js_key": "users_and_leaves", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "current_department", "js_type": "string", "js_value": "\"\\u5317\\u4eac\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"\\u062e\\u0644\\u064a\\u0644\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "query", "js_type": "object", "js_value": [{"js_key": "as-csv", "js_type": "string", "js_value": "\"Mon Aug 03 12:45:00\""}]}]}, {"js_key": "team_view_details", "js_type": "object", "js_value": [{"js_key": "related_departments", "js_type": "boolean", "js_value": "true"}, {"js_key": "users_and_leaves", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "current_department", "js_type": "string", "js_value": "\"New York\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"\\u8427\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "query", "js_type": "object", "js_value": [{"js_key": "as-csv", "js_type": "string", "js_value": "\"Mon Aug 03 12:45:00\""}]}]}, {"js_key": "team_view_details", "js_type": "object", "js_value": [{"js_key": "related_departments", "js_type": "boolean", "js_value": "false"}, {"js_key": "users_and_leaves", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}, {"js_key": "current_department", "js_type": "string", "js_value": "\"Roma\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"Jean-Philippe\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "query", "js_type": "object", "js_value": [{"js_key": "as-csv", "js_type": "string", "js_value": "\"Mon Aug 03 12:45:00\""}]}]}, {"js_key": "team_view_details", "js_type": "object", "js_value": [{"js_key": "related_departments", "js_type": "boolean", "js_value": "true"}, {"js_key": "users_and_leaves", "js_type": "string", "js_value": "\"user@ponicode\""}, {"js_key": "current_department", "js_type": "string", "js_value": "\"\\u5317\\u4eac\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"edmond\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "query", "js_type": "object", "js_value": [{"js_key": "as-csv", "js_type": "string", "js_value": "\"01:04:03\""}]}]}, {"js_key": "team_view_details", "js_type": "object", "js_value": [{"js_key": "related_departments", "js_type": "boolean", "js_value": "false"}, {"js_key": "users_and_leaves", "js_type": "string", "js_value": "\"ponicode.com\""}, {"js_key": "current_department", "js_type": "string", "js_value": "\"\\u5317\\u4eac\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"edmond\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "query", "js_type": "object", "js_value": [{"js_key": "as-csv", "js_type": "string", "js_value": "\"2017-09-29T19:01:00.000\""}]}]}, {"js_key": "team_view_details", "js_type": "object", "js_value": [{"js_key": "related_departments", "js_type": "boolean", "js_value": "true"}, {"js_key": "users_and_leaves", "js_type": "string", "js_value": "\"user@ponicode\""}, {"js_key": "current_department", "js_type": "string", "js_value": "\"New York\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"Pierre Edouard\""}]}]}]}, {"details": {"endIndex": 4787, "endLine": 159, "hasReturn": true, "name": "render_allowancebytime_as_csv", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(render_allowancebytime_as_csv)", "reachName": "render_allowancebytime_as_csv", "reason": "Valid", "startIndex": 3480, "startLine": 113, "type": "function"}, "function_code": "function render_allowancebytime_as_csv(args) {\n  let\n    res               = args.res,\n    team_view_details = args.team_view_details,\n    company           = args.company,\n    start_date        = args.start_date,\n    end_date          = args.end_date;\n\n  // Compose file name\n  res.attachment(\n    company.name_for_machine()\n      + '_employee_allowances_between'\n      + start_date.format('YYYY_MM')\n      + '_and_'\n      + end_date.format('YYYY_MM')\n      + '.csv'\n  );\n\n  // Compose result CSV header\n  let content = [\n    ['email', 'last name', 'name']\n    // Add dynamic list of Leave Types\n    .concat(\n      team_view_details.users_and_leaves.length > 0\n        ? team_view_details.users_and_leaves[0].statistics.leave_type_break_down.pretty_version.map(it => it.name)\n        : []\n    )\n    .concat(['days deducted from allowance'])\n  ];\n\n  // ... and body\n  team_view_details.users_and_leaves.forEach(ul => {\n    content.push(\n      [\n        ul.user.email,\n        ul.user.lastname,\n        ul.user.name,\n      ]\n      // Dynamic part of the column list\n      .concat( ul.statistics.leave_type_break_down.pretty_version.map(it => it.stat))\n      .concat([ul.statistics.deducted_days])\n    );\n  });\n\n  return csv.stringifyAsync( content )\n    .then(csv_data_string => res.send(csv_data_string));\n}", "function_name": "render_allowancebytime_as_csv", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/reports.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\".\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/folder/\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"/path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"./path/to/file\""}]}]}, {"details": {"endIndex": 1322, "endLine": 50, "hasReturn": true, "name": "__direct_export__", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 68, "startLine": 6, "type": "function"}, "function_code": "function(sequelize, DataTypes){\n  let UserAllowanceAdjustment = sequelize.define(\"UserAllowanceAdjustment\", {\n    year : {\n      type         : DataTypes.INTEGER,\n      allowNull    : false,\n      defaultValue : moment.utc().format('YYYY'),\n      comment      : 'Year when adjustment is applied',\n    },\n    adjustment : {\n      type         : DataTypes.INTEGER,\n      allowNull    : false,\n      defaultValue : 0,\n      comment      : 'Adjustment to allowance in current year',\n    },\n    carried_over_allowance : {\n      type         : DataTypes.INTEGER,\n      allowNull    : false,\n      defaultValue : 0,\n      comment      : 'Additional allowance to use based on un-used holidays in previous year',\n    },\n  }, {\n    underscored     : true,\n    freezeTableName : true,\n    timestamps      : true,\n    createdAt       : 'created_at',\n    updatedAt       : false,\n    tableName       : 'user_allowance_adjustment',\n    indexes : [{\n      fields : [ 'user_id', 'year' ],\n      unique : true,\n    }],\n\n    classMethods : {\n      associate : function(models) {\n        UserAllowanceAdjustment.belongsTo(models.User, {\n          as         : 'user',\n          foreignKey : 'user_id',\n        });\n      },\n    },\n\n  });\n\n  return UserAllowanceAdjustment;\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "sequelize", "type": "simple", "variadic": false}, {"name": "DataTypes", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/db/user_allowance_adjustment.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"ar\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ar\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"cn\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"fr\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ru\""}, {"js_type": "object", "js_value": [{"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}]}]}]}, {"details": {"endIndex": 1066, "endLine": 46, "hasReturn": true, "name": "__direct_export__", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 33, "startLine": 4, "type": "function"}, "function_code": "(sequelize, DataTypes) => {\n  const Comment = sequelize.define('Comment', {\n    entityType: {\n      type: DataTypes.STRING,\n      allowNull: false,\n      comment: 'Type of entity current comments belongs to',\n    },\n    entityId: {\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      comment: 'Reference ID for entity current comment belongs to',\n    },\n    comment: {\n      type: DataTypes.STRING,\n      allowNull: false,\n      comment: 'The value of comment',\n    },\n  },{\n    underscored     : true,\n    freezeTableName : true,\n    timestamps      : true,\n    createdAt       : 'at',\n    updatedAt       : false,\n    tableName       : 'comment',\n\n    classMethods : {\n      associate : (models) => {\n        Comment.belongsTo(models.Company, {\n          as         : 'company',\n          foreignKey : 'companyId',\n        });\n\n        Comment.belongsTo(models.User, {\n          as: 'byUser',\n          foreignKey: 'byUserId',\n        });\n      },\n      getEntityTypeLeave: () => 'LEAVE',\n    },\n  });\n\n  return Comment;\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "sequelize", "type": "simple", "variadic": false}, {"name": "DataTypes", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/db/comment.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"ar\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"foo bar\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"PONICODE\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Foo bar\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Hello, world!\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"150.151.152.153\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"cn\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"cn\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Hello, world!\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"foo bar\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ar\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Foo bar\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"1.2.3.4\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ar\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ru\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"PONICODE\""}, {"js_key": "INTEGER", "js_type": "string", "js_value": "\"192.168.99.101\""}]}]}]}, {"details": {"endIndex": 455, "endLine": 22, "hasReturn": false, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 83, "startLine": 7, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n\n    queryInterface.describeTable('Companies').then(function(attributes){\n\n      if (attributes.hasOwnProperty('company_wide_message')) {\n        return 1;\n      }\n\n      return queryInterface.addColumn(\n        'Companies',\n        'company_wide_message',\n        models.Company.attributes.company_wide_message\n      );\n    });\n\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20171218-company-wide-message.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"details": {"endIndex": 585, "endLine": 26, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 466, "startLine": 24, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    return queryInterface.removeColumn('Companies', 'company_wide_message');\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20171218-company-wide-message.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"details": {"endIndex": 472, "endLine": 22, "hasReturn": false, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 40, "startLine": 4, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n\n    queryInterface.describeTable('Companies').then(function(attributes){\n\n      if (attributes.hasOwnProperty('date_format')) {\n        return 1;\n      }\n\n      return queryInterface.addColumn(\n        'Companies',\n        'date_format',\n        {\n          type         : Sequelize.STRING,\n          allowNull    : false,\n          defaultValue : 'YYYY-MM-DD',\n        }\n      );\n    });\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20170103144054-add_default_date_format.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"foo bar\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Foo bar\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"PONICODE\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"foo bar\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Welcome to Ponicode!\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Hello, world!\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Welcome to Ponicode!\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"PONICODE\""}]}]}]}, {"details": {"endIndex": 593, "endLine": 26, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 483, "startLine": 24, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    return queryInterface.removeColumn('Companies', 'date_format');\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20170103144054-add_default_date_format.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"details": {"endIndex": 5515, "endLine": 166, "hasReturn": true, "name": "__direct_export__", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 5428, "startLine": 164, "type": "function"}, "function_code": "function(args){\n  return args.driver.call(function(){return submit_form_func(args)});\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/t/lib/submit_form.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"./path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/folder/\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"/path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\".\""}]}]}, {"details": {"endIndex": 7921, "endLine": 246, "hasReturn": true, "name": "promise_feed_of_type", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(promise_feed_of_type)", "reachName": "promise_feed_of_type", "reason": "Valid", "startIndex": 7524, "startLine": 229, "type": "function"}, "function_code": "function promise_feed_of_type(args) {\n  var type = args.type,\n      user = args.user,\n      feeds= args.feeds,\n      feed = _.findWhere(feeds, { type : type }),\n      feed_promise;\n\n  if (! feed) {\n    feed_promise = user.sequelize.models.UserFeed.promise_new_feed({\n      user : user,\n      type : type,\n    });\n  } else {\n    feed_promise = Promise.resolve( feed );\n  }\n\n  return feed_promise;\n}", "function_name": "promise_feed_of_type", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/calendar.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"array\""}, {"js_key": "feeds", "js_type": "string", "js_value": "\"app.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"number\""}, {"js_key": "feeds", "js_type": "string", "js_value": "\"Www.PoniCode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"string\""}, {"js_key": "feeds", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"array\""}, {"js_key": "feeds", "js_type": "string", "js_value": "\"https://ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"object\""}, {"js_key": "feeds", "js_type": "string", "js_value": "\"https://ponicode.com?a=1#2#3\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"string\""}, {"js_key": "feeds", "js_type": "string", "js_value": "\"https://ponicode.com?a=1#2#3\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"array\""}, {"js_key": "feeds", "js_type": "string", "js_value": "\"Www.PoniCode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"number\""}, {"js_key": "feeds", "js_type": "string", "js_value": "\"https://ponicode.com?a=1&b=2\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"array\""}, {"js_key": "feeds", "js_type": "string", "js_value": "\"https://\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "type", "js_type": "string", "js_value": "\"string\""}, {"js_key": "feeds", "js_type": "string", "js_value": "\"https://ponicode.com\""}]}]}]}, {"details": {"endIndex": 4100, "endLine": 154, "hasReturn": true, "name": "check_presense_promises", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(check_presense_promises)", "reachName": "check_presense_promises", "reason": "Valid", "startIndex": 3637, "startLine": 135, "type": "function"}, "function_code": "function check_presense_promises(args){\n\n  var selectors = args.selectors,\n      driver    = args.driver,\n      presense  = args.presense || false;\n\n  var promises_to_check = _.map(\n   selectors,\n    function( selector ){\n      return driver\n        .isElementPresent(By.css(selector))\n        .then(function(is_present){\n          expect(is_present).to.be.equal(presense);\n          return bluebird.resolve();\n        })\n    }\n  );\n\n  return promises_to_check;\n}", "function_name": "check_presense_promises", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/t/integration/menu_bar_reflect_user.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "presense", "js_type": "boolean", "js_value": "false"}, {"js_key": "selectors", "js_type": "string", "js_value": "\"it\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "presense", "js_type": "boolean", "js_value": "true"}, {"js_key": "selectors", "js_type": "string", "js_value": "\"en\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "presense", "js_type": "boolean", "js_value": "false"}, {"js_key": "selectors", "js_type": "string", "js_value": "\"ar\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "presense", "js_type": "boolean", "js_value": "false"}, {"js_key": "selectors", "js_type": "string", "js_value": "\"ru\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "presense", "js_type": "boolean", "js_value": "false"}, {"js_key": "selectors", "js_type": "string", "js_value": "\"fr\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "presense", "js_type": "boolean", "js_value": "true"}, {"js_key": "selectors", "js_type": "string", "js_value": "\"ar\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "presense", "js_type": "boolean", "js_value": "false"}, {"js_key": "selectors", "js_type": "string", "js_value": "\"de\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "presense", "js_type": "boolean", "js_value": "false"}, {"js_key": "selectors", "js_type": "string", "js_value": "\"en\""}]}]}]}, {"details": {"endIndex": 493, "endLine": 22, "hasReturn": true, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 83, "startLine": 7, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n\n    return queryInterface.describeTable('Departments')\n      .then(function(attributes){\n\n        if (attributes.hasOwnProperty('is_accrued_allowance')) {\n          return 1;\n        }\n\n        return queryInterface.addColumn(\n          'Departments',\n          'is_accrued_allowance',\n          models.Department.attributes.is_accrued_allowance\n        );\n      });\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20180427-add-is_accrued_allowance-to-department.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"details": {"endIndex": 632, "endLine": 27, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 504, "startLine": 24, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    return queryInterface\n      .removeColumn('Departments', 'is_accrued_allowance');\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20180427-add-is_accrued_allowance-to-department.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"details": {"endIndex": 1493, "endLine": 26, "hasReturn": true, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 85, "startLine": 7, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n\n    return queryInterface.describeTable('Companies').then(attributes => {\n\n      if (attributes.integration_api_token.type === 'UUID') {\n        return 1;\n      }\n      \n      return queryInterface\n        // Create Temp Compaies based on current model definitiom\n        .createTable('Companies_backup', models.Company.attributes)\n        .then(() => queryInterface.sequelize.query('PRAGMA foreign_keys=off;'))\n        .then(() => queryInterface.sequelize.query(\n          'INSERT INTO `Companies_backup` (`id`,`name`,`country`,`start_of_new_year`,`createdAt`,`updatedAt`,share_all_absences,ldap_auth_enabled,ldap_auth_config,`date_format`,`company_wide_message`,`mode`,`timezone`,`integration_api_token`,`integration_api_enabled`,`carry_over`) SELECT `id`,`name`,`country`,`start_of_new_year`,`createdAt`,`updatedAt`,share_all_absences,ldap_auth_enabled,ldap_auth_config,`date_format`,`company_wide_message`,`mode`,`timezone`,`integration_api_token`,`integration_api_enabled`,`carry_over` FROM `'+models.Company.tableName+'`'))\n        .then(() => queryInterface.dropTable( models.Company.tableName ))\n        .then(() => queryInterface.renameTable('Companies_backup', models.Company.tableName))\n        .then(() => queryInterface.sequelize.query('PRAGMA foreign_keys=on;'))\n        .then(() => queryInterface.addIndex(models.Company.tableName, ['id']));\n    });\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20190118-chnage-type-value-for-api-token.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"1user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}, {"details": {"endIndex": 1596, "endLine": 31, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 1504, "startLine": 28, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    // No way back!\n    return Promise.resolve();\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20190118-chnage-type-value-for-api-token.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}, {"details": {"endIndex": 735, "endLine": 29, "hasReturn": true, "name": "get_url_to_site_root_for_anonymous_session", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(get_url_to_site_root_for_anonymous_session)", "reachName": "get_url_to_site_root_for_anonymous_session", "reason": "Valid", "startIndex": 610, "startLine": 25, "type": "function"}, "function_code": "function(req) {\n  return req.get('host').indexOf('app.timeoff') < 0\n    ? '/'\n    : config.get('promotion_website_domain');\n}", "function_name": "get_url_to_site_root_for_anonymous_session", "function_parameters": [{"name": "req", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/login.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"www.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"Www.PoniCode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"https://\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com?a=1&b=2\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"https://ponicode.com?a=1#2#3\""}]}]}, {"details": {"endIndex": 2147, "endLine": 72, "hasReturn": true, "name": "__direct_export__", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 139, "startLine": 7, "type": "function"}, "function_code": "function(sequelize, DataTypes) {\n    var BankHoliday = sequelize.define(\"BankHoliday\", {\n        // TODO add validators!\n        name : {\n            type      : DataTypes.STRING,\n            allowNull : false\n        },\n        date : {\n            type         : DataTypes.DATE,\n            allowNull    : false,\n        },\n    }, {\n        indexes : [\n          {\n            fields : ['companyId'],\n          }\n        ],\n        classMethods: {\n            associate : function( models ) {\n                BankHoliday.belongsTo(models.Company, {as : 'company'});\n            },\n\n            generate_bank_holidays : function(args){\n                var company = args.company,\n                    country_code = args.country_code;\n\n                var bank_holidays = [\n                    {\n                        name : 'Early May bank holiday',\n                        date : '2015-05-04',\n                        companyId : company.id,\n                    },\n                ];\n\n                var config_countries = config.get('countries');\n\n                if (\n                    config_countries.hasOwnProperty( country_code )\n                    && config_countries[ country_code ].hasOwnProperty('bank_holidays')\n                    && config_countries[ country_code ].bank_holidays.length > 0\n                ) {\n                  bank_holidays = _.map(\n                    config_countries[ country_code ].bank_holidays,\n                    function(bh){\n                      return {\n                        name      : bh.name,\n                        date      : bh.date,\n                        companyId : company.id,\n                      };\n                    }\n                  );\n                }\n\n                return BankHoliday.bulkCreate(bank_holidays);\n            },\n        },\n\n        instanceMethods : {\n          get_pretty_date : function(){\n            return moment.utc(this.date).format('YYYY-MM-DD');\n          },\n        }\n    });\n\n    return BankHoliday;\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "sequelize", "type": "simple", "variadic": false}, {"name": "DataTypes", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/db/bank_holiday.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "DATE", "js_type": "string", "js_value": "\"Mon Aug 03 12:45:00\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Hello, world!\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "object", "js_value": [{"js_key": "DATE", "js_type": "string", "js_value": "\"Mon Aug 03 12:45:00\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Welcome to Ponicode!\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "DATE", "js_type": "string", "js_value": "\"2017-09-29T19:01:00.000\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Foo bar\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "DATE", "js_type": "string", "js_value": "\"2017-09-29T23:01:00.000Z\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Foo bar\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "DATE", "js_type": "string", "js_value": "\"2017-09-29T23:01:00.000Z\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"foo bar\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "DATE", "js_type": "string", "js_value": "\"2017-09-29T23:01:00.000Z\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"foo bar\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "DATE", "js_type": "string", "js_value": "\"2017-09-29T19:01:00.000\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"Welcome to Ponicode!\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ru\""}, {"js_type": "object", "js_value": [{"js_key": "DATE", "js_type": "string", "js_value": "\"01:04:03\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "object", "js_value": [{"js_key": "DATE", "js_type": "string", "js_value": "\"Mon Aug 03 12:45:00\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ru\""}, {"js_type": "object", "js_value": [{"js_key": "DATE", "js_type": "string", "js_value": "\"2017-09-29T23:01:00.000Z\""}, {"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}]}]}]}, {"details": {"endIndex": 786, "endLine": 35, "hasReturn": true, "name": "__direct_export__", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 33, "startLine": 4, "type": "function"}, "function_code": "function(sequelize, DataTypes){\n  var DepartmentSupervisor = sequelize.define(\"DepartmentSupervisor\", {}, {\n    underscored     : true,\n    freezeTableName : true,\n    timestamps      : true,\n    createdAt       : 'created_at',\n    updatedAt       : false,\n    indexes : [{\n      fields : [ 'department_id' ],\n    },{\n      fields : [ 'user_id' ],\n    }],\n\n    classMethods : {\n      associate : function(models) {\n\n        DepartmentSupervisor.belongsTo(models.Department, {\n          as         : 'department',\n          foreignKey : 'department_id',\n        });\n\n        DepartmentSupervisor.belongsTo(models.User, {\n          as         : 'user',\n          foreignKey : 'user_id',\n        });\n      },\n    },\n\n  });\n\n  return DepartmentSupervisor;\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "sequelize", "type": "simple", "variadic": false}, {"name": "DataTypes", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/db/department_supervisor.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "string", "js_value": "\".exe\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "string", "js_value": "\".js\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "string", "js_value": "\".py\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"fr\""}, {"js_type": "string", "js_value": "\".json\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"fr\""}, {"js_type": "string", "js_value": "\".png\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "string", "js_value": "\".json\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"cn\""}, {"js_type": "string", "js_value": "\".json\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}, {"js_type": "string", "js_value": "\".png\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"cn\""}, {"js_type": "string", "js_value": "\".exe\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}, {"js_type": "string", "js_value": "\".png\""}]}]}, {"details": {"endIndex": 1650, "endLine": 66, "hasReturn": true, "name": "__direct_export__", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 75, "startLine": 6, "type": "function"}, "function_code": "function(sequelize, DataTypes) {\n  var UserFeed = sequelize.define(\"UserFeed\", {\n    name : {\n      type : DataTypes.STRING,\n      allowNull : false,\n    },\n    feed_token : {\n      type      : DataTypes.STRING,\n      allowNull : false,\n    },\n    type : {\n      // NOTE: 'wallchart' and 'teamview' are essentially the same thing\n      // later one used to be know as former, from now on use 'teamview'\n      // and keep old what for data compatibility\n      type      : DataTypes.ENUM('calendar', 'wallchart', 'teamview', 'company'),\n      allowNull : false,\n    },\n  }, {\n\n    classMethods: {\n      associate : function( models ) {\n        UserFeed.belongsTo(models.User, {as : 'user'});\n      },\n\n      promise_new_feed : function(args){\n        var self = this,\n            user = args.user,\n            type = args.type;\n\n        return self\n          .find({ where : {userId : user.id, type : type} })\n          .then(function(feed){\n            if ( feed ) {\n              feed.feed_token = uuid.v4();\n              return feed.save();\n            } else {\n              return self.create({\n                name       : \"Calendar Feed\",\n                feed_token : uuid.v4(),\n                type       : type,\n                userId     : user.id,\n              });\n            }\n          })\n      },\n\n    },\n\n    instanceMethods : {\n      is_calendar : function() {\n        return this.type === 'calendar';\n      },\n\n      is_team_view : function(){\n        return this.type === 'wallchart' || this.type === 'teamview';\n      },\n    },\n  });\n\n  return UserFeed;\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "sequelize", "type": "simple", "variadic": false}, {"name": "DataTypes", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/db/user_feed.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"cn\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Foo bar\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"fr\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"PONICODE\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Hello, world!\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ar\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"fr\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"H3ll0! P0n1c0d3 iz g00d\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"cn\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Welcome to Ponicode!\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"fr\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"Welcome to Ponicode!\""}]}]}, {"input_values": [{"js_type": "string", "js_value": "\"ar\""}, {"js_type": "object", "js_value": [{"js_key": "STRING", "js_type": "string", "js_value": "\"PONICODE\""}]}]}]}, {"details": {"endIndex": 7636, "endLine": 272, "hasReturn": true, "name": "promise_to_extract_company_and_department", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(promise_to_extract_company_and_department)", "reachName": "promise_to_extract_company_and_department", "reason": "Valid", "startIndex": 6440, "startLine": 225, "type": "function"}, "function_code": "function promise_to_extract_company_and_department(req, only_active = true) {\n  var department_id = req.params['department_id'],\n    company;\n\n  return Promise.try(function(){\n\n    if ( ! validator.isInt(department_id)) {\n      throw new Error('User '+req.user.id+' tried to open department refered by  non-int ID '+department_id);\n    }\n\n    if (only_active) {\n      return req.user.getCompany({\n        scope : ['with_active_users', 'order_by_active_users'],\n      });\n    } else {\n      return req.user.getCompany({\n        scope : ['with_all_users'],\n      });\n    }\n  })\n  .then(function(c){\n    company = c;\n\n    if ( ! company ) {\n      throw new Error('Cannot determin company!');\n    }\n\n    return company.getDepartments({\n      scope : ['with_simple_users', 'with_boss', 'with_supervisors'],\n      where : {\n        id : department_id,\n      }\n    });\n  })\n  .then(function(departments){\n    var department = departments[0];\n\n    // Ensure we have database record for given department ID\n    if ( ! department ) {\n      throw new Error('Non existing department ID provided');\n    }\n\n    return Promise.resolve({\n      company    : company,\n      department : department,\n    });\n  });\n}", "function_name": "promise_to_extract_company_and_department", "function_parameters": [{"name": "req", "type": "simple", "variadic": false}, {"default": {"js_type": "boolean", "js_value": "true"}, "name": "only_active", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/departments.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "object", "js_value": [{"js_key": "department_id", "js_type": "string", "js_value": "\"\\u5317\\u4eac\""}]}, {"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}]}]}, {"js_type": "boolean", "js_value": "false"}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "object", "js_value": [{"js_key": "department_id", "js_type": "string", "js_value": "\"Saint-Denis\""}]}, {"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}]}]}, {"js_type": "boolean", "js_value": "true"}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "object", "js_value": [{"js_key": "department_id", "js_type": "string", "js_value": "\"\\u0627\\u0644\\u0631\\u0650\\u0651\\u0628\\u064e\\u0627\\u0637\\u200e\""}]}, {"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"myDIV\""}]}]}, {"js_type": "boolean", "js_value": "true"}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "object", "js_value": [{"js_key": "department_id", "js_type": "string", "js_value": "\"Roma\""}]}, {"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}]}]}, {"js_type": "boolean", "js_value": "false"}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "object", "js_value": [{"js_key": "department_id", "js_type": "string", "js_value": "\"\\u0627\\u0644\\u0631\\u0650\\u0651\\u0628\\u064e\\u0627\\u0637\\u200e\""}]}, {"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}]}]}, {"js_type": "boolean", "js_value": "false"}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "object", "js_value": [{"js_key": "department_id", "js_type": "string", "js_value": "\"Roma\""}]}, {"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}]}]}, {"js_type": "boolean", "js_value": "true"}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "object", "js_value": [{"js_key": "department_id", "js_type": "string", "js_value": "\"Saint-Denis\""}]}, {"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"myDIV\""}]}]}, {"js_type": "boolean", "js_value": "true"}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "object", "js_value": [{"js_key": "department_id", "js_type": "string", "js_value": "\"Saint-Denis\""}]}, {"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}]}]}, {"js_type": "boolean", "js_value": "false"}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "object", "js_value": [{"js_key": "department_id", "js_type": "string", "js_value": "\"\\u0627\\u0644\\u0631\\u0650\\u0651\\u0628\\u064e\\u0627\\u0637\\u200e\""}]}, {"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}]}]}, {"js_type": "boolean", "js_value": "true"}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "params", "js_type": "object", "js_value": [{"js_key": "department_id", "js_type": "string", "js_value": "\"\\u5317\\u4eac\""}]}, {"js_key": "user", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"myDIV\""}]}]}, {"js_type": "boolean", "js_value": "true"}]}]}, {"details": {"endIndex": 11018, "endLine": 393, "hasReturn": true, "name": "promise_to_remove_supervisor", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(promise_to_remove_supervisor)", "reachName": "promise_to_remove_supervisor", "reason": "Valid", "startIndex": 10461, "startLine": 376, "type": "function"}, "function_code": "function promise_to_remove_supervisor(args) {\n  var\n    supervisor_id = args.supervisor_id,\n    company       = args.company,\n    department    = args.department;\n\n  // Make sure that provided supervisor ID belongs to user from current company\n  if (company.users.map(function(u){return String(u.id)}).indexOf( String(supervisor_id) ) === -1){\n    return Promise.resolve(1);\n  }\n\n  return  department.Model.sequelize.models.DepartmentSupervisor.destroy({\n    where : {\n      department_id : department.id,\n      user_id       : supervisor_id,\n    },\n  });\n}", "function_name": "promise_to_remove_supervisor", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/departments.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}]}, {"js_key": "supervisor_id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}, {"js_key": "supervisor_id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}]}, {"js_key": "supervisor_id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}]}, {"js_key": "supervisor_id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}]}, {"js_key": "supervisor_id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}]}, {"js_key": "supervisor_id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}, {"js_key": "supervisor_id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}, {"js_key": "supervisor_id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}]}]}]}, {"details": {"endIndex": 11842, "endLine": 422, "hasReturn": true, "name": "promise_to_update_supervisors", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(promise_to_update_supervisors)", "reachName": "promise_to_update_supervisors", "reason": "Valid", "startIndex": 11020, "startLine": 395, "type": "function"}, "function_code": "function promise_to_update_supervisors(args) {\n\n  var\n    req        = args.req,\n    company    = args.company,\n    department = args.department;\n\n  var supervisor_ids = req.body.supervisor_id || [];\n\n  // Take list of all users as a base of intersaction,\n  // so we use submitted data only as criteria and do not save it in database\n  supervisor_ids = company.users\n    .map(function(user){ return user.id})\n    .filter(function(id){ return supervisor_ids.indexOf(String(id)) !== -1});\n\n  var link_model = department.Model.sequelize.models.DepartmentSupervisor;\n\n  return link_model.destroy({\n    where : {\n      department_id : department.id,\n    }\n  })\n  .then(function(){\n    return link_model.bulkCreate(\n      supervisor_ids.map(function(id){ return { user_id : id, department_id : department.id  } })\n    );\n  });\n}", "function_name": "promise_to_update_supervisors", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/departments.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "supervisor_id", "js_type": "string", "js_value": "\"a85a8e6b-348b-4011-a1ec-1e78e9620782\""}]}]}, {"js_key": "department", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "supervisor_id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}]}, {"js_key": "department", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"myDIV\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "supervisor_id", "js_type": "string", "js_value": "\"03ea49f8-1d96-4cd0-b279-0684e3eec3a9\""}]}]}, {"js_key": "department", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}]}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "req", "js_type": "object", "js_value": [{"js_key": "body", "js_type": "object", "js_value": [{"js_key": "supervisor_id", "js_type": "string", "js_value": "\"7289708e-b17a-477c-8a77-9ab575c4b4d8\""}]}]}, {"js_key": "department", "js_type": "object", "js_value": [{"js_key": "id", "js_type": "string", "js_value": "\"ponicodecom\""}]}]}]}]}, {"details": {"endIndex": 12437, "endLine": 443, "hasReturn": true, "name": "promise_to_update_department", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(promise_to_update_department)", "reachName": "promise_to_update_department", "reason": "Valid", "startIndex": 11844, "startLine": 424, "type": "function"}, "function_code": "function promise_to_update_department(args) {\n  var\n    req        = args.req,\n    company    = args.company,\n    department = args.department;\n\n  var attributes = get_and_validate_department({\n    company         : company,\n    department_name : department.name,\n    no_suffix       : true,\n    req             : req,\n  });\n\n  // If there were any validation errors: do not update department\n  if ( req.session.flash_has_errors() ) {\n    throw new Error(\"Invalid parameters submitted while while attempt to update department details\");\n  }\n\n  return department.updateAttributes(attributes);\n}", "function_name": "promise_to_update_department", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/route/departments.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"object\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"edmond\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"object\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"Jean-Philippe\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"array\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"edmond\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"string\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"George\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"number\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"\\u8427\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"array\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"\\u8427\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"object\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"Pierre Edouard\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "department", "js_type": "object", "js_value": [{"js_key": "name", "js_type": "string", "js_value": "\"array\""}]}, {"js_key": "company", "js_type": "string", "js_value": "\"George\""}]}]}]}, {"details": {"endIndex": 4550, "endLine": 172, "hasReturn": true, "name": "__direct_export__", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "Valid", "startIndex": 4360, "startLine": 166, "type": "function"}, "function_code": "function(args){\n  if (args.hasOwnProperty('driver')) {\n    return args.driver.call(function(){return register_new_user_func(args)});\n  } else {\n    return register_new_user_func(args);\n  }\n}", "function_name": "__direct_export__", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/t/lib/register_new_user.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"./path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"/path/to/file\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"path/to/file.ext\""}]}, {"input_values": [{"js_type": "string", "js_value": "\".\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"C:\\\\\\\\path\\\\to\\\\folder\\\\\""}]}]}, {"details": {"endIndex": 12569, "endLine": 422, "hasReturn": true, "name": "get_instance_methods", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(get_instance_methods)", "reachName": "get_instance_methods", "reason": "Valid", "startIndex": 3108, "startLine": 111, "type": "function"}, "function_code": "function get_instance_methods(sequelize) {\n\n  return {\n\n    is_my_password : function( password ) {\n        return sequelize.models.User.hashify_password( password ) === this.password;\n    },\n\n    /*\n     * Activate user only when it is inactive.\n     * Return promise that gets user's object.\n     * */\n    maybe_activate : function(){\n      if ( ! this.activated ) {\n          this.activated = true;\n      }\n      return this.save();\n    },\n\n    is_admin : function() {\n      return this.admin === true;\n    },\n\n    /*\n     * Indicates is leave requests from current user are automatically approved\n     * */\n    is_auto_approve : function(){\n      return this.auto_approve === true;\n    },\n\n    full_name : function() {\n      return this.name + ' ' + this.lastname;\n    },\n\n    /*\n     * Indicates if the user is active\n     * */\n    is_active : function(){\n      return this.end_date === null || moment(this.end_date).isAfter(moment());\n    },\n\n    // TODO VPP: rename this method as its name misleading: it returns all users\n    // managed by current users + user itself, so it should be something like\n    // \"promise_all_supervised_users_plus_me\"\n    // In fact this method probably have to be ditched in favour of more granular ones\n    //\n    promise_users_I_can_manage : function(){\n      var this_user = this;\n\n      // Check if current user is admin, then fetch all users form company\n      if ( this_user.is_admin() ) {\n\n        return this_user\n          .getCompany({\n            scope : ['with_all_users'],\n          })\n          .then(function(company){\n            return Promise.resolve( company.users );\n          });\n      }\n\n      // If current user has any departments under supervision then get\n      // all users from those departments plus user himself,\n      // if no supervised users an array with only current user is returned\n      return this_user.promise_supervised_departments()\n      .then(function(departments){\n        var users = _.flatten(\n          _.map(\n            departments,\n            function(department){ return department.users; }\n          )\n        );\n\n        // Make sure current user is considered as well\n        users.push(this_user);\n\n        // Remove duplicates\n        users = _.uniq(\n          users,\n          function(user){ return user.id; }\n        );\n\n        // Order by last name\n        users = _.sortBy(\n          users,\n          function(user){ return user.lastname; }\n        );\n\n        return users;\n      });\n\n    }, // promise_users_I_can_manage\n\n    /*\n     * Return user's boss, the head of department user belongs to\n     *\n     * */\n    promise_boss : function(){\n      return this.getDepartment({\n        scope : ['with_boss'],\n      })\n      .then(department => Promise.resolve( department.boss ));\n    },\n\n    /*\n     *  Return users who could supervise current user, that is those who could\n     *  approve its leave requests and who can create leave requests on behalf of\n     *  those user.\n     *\n     * */\n    promise_supervisors : function(){\n      return this.getDepartment({\n        scope : ['with_boss', 'with_supervisors'],\n      })\n      .then( department => Promise.resolve( _.flatten([ department.boss, department.supervisors ]) ) );\n    },\n\n    promise_supervised_departments : function() {\n      let self = this;\n\n      return sequelize.models.DepartmentSupervisor.findAll({ where : { user_id : self.id } })\n        // Obtain departments current user supervises as secondary supervisor\n        .then(department_supervisors => department_supervisors.map( obj => obj.department_id ))\n        .then( department_ids => {\n\n          if ( ! department_ids ) {\n            department_ids = [];\n          }\n\n          return sequelize.models.Department.scope('with_simple_users').findAll({\n            where : {\n              $or : [\n                { id : department_ids },\n                { bossId : self.id },\n              ]\n            }\n          });\n        });\n    },\n\n    promise_supervised_users : function () {\n      let self = this;\n\n      return self\n        .promise_supervised_departments()\n        .then(departments => {\n          return self.Model.findAll({ where : { DepartmentId : departments.map(d => d.id ) } });\n        })\n    },\n\n\n    // Generate object that represent Employee allowance\n    promise_allowance : function(args) {\n      args = args || {};\n      // Override user to be current one\n      args.user = this;\n      return UserAllowance.promise_allowance(args);\n    },\n\n    reload_with_leave_details : function(args){\n      var self = this;\n\n      return Promise.join(\n        self.promise_my_active_leaves(args),\n        self.getDepartment(),\n        self.promise_schedule_I_obey(),\n        function(leaves, department, schedule){\n          self.my_leaves = leaves;\n          self.department = department;\n\n          // Note: we do not do anything with scheduler as \"promise_schedule_I_obey\"\n          // sets the \"cached_schedule\" attribute under the hood, which is used in\n          // synchronous code afterwards. Yes... it is silly, but it is where we are\n          // at thi moment after mixing non blocking and blocking code together...\n          //\n          return Promise.resolve(self);\n        }\n      );\n\n    },\n\n    // This method reload user object to have all necessary information to render\n    // each page\n    reload_with_session_details : function(){\n      var self = this;\n      return Promise.join(\n        self.promise_users_I_can_manage(),\n        self.get_company_with_all_leave_types(),\n        self.promise_schedule_I_obey(),\n        function(users, company, schedule){\n          self.supervised_users = users || [];\n          self.company = company;\n\n          // Note: we do not do anithing with scheduler as \"promise_schedule_I_obey\"\n          // sets the \"cached_schedule\" attribute under the hood, which is used in\n          // synchronous code afterwards. Yes... it is silly, but it is where we are\n          // at thi moment after mixing non blocking and blocking code together...\n\n          return Promise.resolve(self);\n        });\n    },\n\n\n    remove : function() {\n      var self = this;\n\n      // make sure I am not admin, otherwise throw an error\n      if (self.is_admin()) {\n        throw new Error('Cannot remove administrator user');\n      }\n\n      // make sure I am not supervisor, otherwise throw an error\n      return self.promise_supervised_departments()\n        .then(departments => {\n          if (departments.length > 0){\n            throw new Error(\"Cannot remove supervisor\");\n          }\n\n          return self.getMy_leaves();\n        })\n        .then(function(leaves){\n          // remove all leaves\n          return Promise.all(\n            _.map( leaves, function(leave){ return leave.destroy(); })\n          );\n        })\n\n        // remove user record\n        .then(function(){\n          return self.destroy();\n        })\n\n    },\n\n    get_reset_password_token : function(){\n      var self = this;\n\n      return new Buffer( self.email + ' ' + self.Model.hashify_password( self.password ) ).toString('base64');\n    },\n\n    // Accept an object that represent email to be sent to current user and\n    // record it into the corresponding audit table\n    //\n    record_email_addressed_to_me : function(email_obj) {\n\n      // validate email object to contain all necessary fields\n      if ( ! email_obj ||\n        ! email_obj.hasOwnProperty('subject') ||\n        ! email_obj.subject ||\n        ! email_obj.hasOwnProperty('body') ||\n        ! email_obj.body\n      ) {\n        throw new Error(\n          'Got incorrect parameters. There should be an object '+\n          'to represent and email and contain subject and body'\n        );\n      }\n\n      const promise_action = this.sequelize.models.EmailAudit.create({\n        email      : this.email,\n        subject    : htmlToText.fromString(email_obj.subject),\n        body       : htmlToText.fromString(email_obj.body),\n        user_id    : this.id,\n        company_id : this.companyId,\n      });\n\n      return promise_action;\n    },\n\n    promise_schedule_I_obey : function(){\n      var self = this;\n\n      if ( self.cached_schedule ) {\n        return Promise.resolve( self.cached_schedule );\n      }\n\n      return self.sequelize.models.Schedule\n        .findAll({\n          where : {\n            $or : [\n              { user_id : self.id },\n              { company_id : self.companyId },\n            ]\n          }\n        })\n        .then(function(schedules){\n\n          // no schedules for current user in DB, return default one\n          if (schedules.length === 0) {\n            return self.sequelize.models.Schedule\n              .promise_to_build_default_for({ company_id : self.companyId })\n              .then(function(sch){ self.cached_schedule = sch; return Promise.resolve(sch) });\n          }\n\n          // there are two schedules, presumably one company wide and another\n          // is user specific, return later one\n          if (schedules.length === 2) {\n            return Promise.resolve(\n              _.find(schedules, function(sch){ return sch.is_user_specific() })\n            )\n            .then(function(sch){ self.cached_schedule = sch; return Promise.resolve(sch) });\n          }\n\n          // single schedule means it is company wide one\n          return Promise.resolve( schedules.pop() )\n            .then(function(sch){ self.cached_schedule = sch; return Promise.resolve(sch) });\n        });\n    },\n\n  };\n\n}", "function_name": "get_instance_methods", "function_parameters": [{"name": "sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/db/user.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"cn\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"ar\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"fr\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}]}]}, {"details": {"endIndex": 16529, "endLine": 562, "hasReturn": true, "name": "get_class_methods", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "globalNoExport", "reachDetail": "rewire().__get__(get_class_methods)", "reachName": "get_class_methods", "reason": "Valid", "startIndex": 12572, "startLine": 424, "type": "function"}, "function_code": "function get_class_methods(sequelize) {\n  return {\n\n    /* hashify_password( password_string ) : string\n     *\n     * For provided string return hashed string.\n     *\n     * */\n    hashify_password : function( password ) {\n      return crypto\n        .createHash('md5')\n        .update(\n          password + config.get('crypto_secret'),\n          (config.get('crypto_hash_encoding') || 'binary')\n        )\n        .digest('hex');\n    },\n\n\n    get_user_by_reset_password_token : function(token) {\n      var self                  = this,\n      unpacked_token            = new Buffer(token, 'base64').toString('ascii'),\n      email_and_hashed_password = unpacked_token.split(/\\s/);\n\n      return self.find_by_email(email_and_hashed_password[0])\n        .then(function(user){\n          if (user && self.hashify_password(user.password) === email_and_hashed_password[1]) {\n            return Promise.resolve(user);\n          } else {\n            return Promise.resolve();\n          }\n        })\n    },\n\n    // Get active user by provided email address\n    find_by_email : function( email ) {\n\n      // TODO validate email\n\n      var condition = { email : email };\n      var active_users_filter = this.get_active_user_filter();\n      for (var attrname in active_users_filter) {\n        condition[attrname] = active_users_filter[attrname];\n      }\n\n      return this.find({ where : condition });\n    },\n\n    find_by_id : function(id) {\n      return this.find({ where : {id : id}});\n    },\n\n    /*\n     * Create new admin user within new environment - company etc\n     * */\n    register_new_admin_user : function(attributes){\n\n      // TODO add parameters validation\n\n      // Make sure we hash the password before storing it to DB\n      attributes.password = this.hashify_password(attributes.password);\n\n      var new_departments,\n          new_user,\n          country_code = attributes.country_code,\n          timezone     = attributes.timezone,\n          company_name = attributes.company_name;\n\n      delete attributes.company_name;\n      delete attributes.country_code;\n\n      return sequelize.models.User.find_by_email( attributes.email )\n        .then(function(existing_user){\n          if (existing_user) {\n            const error = new Error('Email is already used')\n            error.show_to_user = true;\n            throw error;\n          }\n\n          if (attributes.name.toLowerCase().indexOf('http') >= 0) {\n            const error = new Error('Name cannot have links');\n            error.show_to_user = true;\n            throw error;\n          }\n\n          return sequelize.models.Company\n            .create_default_company({\n              name         : company_name,\n              country_code : country_code,\n              timezone     : timezone,\n            });\n        })\n\n        // Make sure new user is going to be linked with a company\n        .then(function(company){\n\n          attributes.companyId = company.id;\n          attributes.admin     = true;\n\n          return company.getDepartments();\n        })\n\n        // Make sure new user is linked with department\n        .then(function(departments){\n\n          new_departments = departments;\n\n          attributes.DepartmentId = departments[0].id;\n\n          return sequelize.models.User.create( attributes );\n        })\n\n        // Make sure new departments know who is their boss\n        .then(function(user){\n          new_user = user;\n\n          return Promise.all(_.map(new_departments, function(department){\n            department.bossId = user.id;\n            return department.save();\n          }));\n        })\n\n        // Return promise with newly created user\n        .then(function(){\n          return Promise.resolve(new_user);\n        });\n    },\n\n    get_active_user_filter : function(){\n      return {\n        $or : [\n          { end_date : {$eq : null}},\n          { end_date : {$gte : moment.utc().startOf('day').format('YYYY-MM-DD') }},\n        ],\n      };\n    },\n\n  };\n}", "function_name": "get_class_methods", "function_parameters": [{"name": "sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/db/user.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"fr\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"ru\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"ar\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"en\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"it\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"de\""}]}]}, {"details": {"endIndex": 429, "endLine": 22, "hasReturn": false, "name": "up", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().up", "reachNames": ["up"], "reason": "Valid", "startIndex": 83, "startLine": 7, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n\n    queryInterface.describeTable('LeaveTypes').then(function(attributes){\n\n      if (attributes.hasOwnProperty('sort_order')) {\n        return 1;\n      }\n\n      return queryInterface.addColumn(\n        'LeaveTypes',\n        'sort_order',\n        models.LeaveType.attributes.sort_order\n      );\n    });\n\n  }", "function_name": "up", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20180103-sort-order-for-leave-types.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"details": {"endIndex": 550, "endLine": 26, "hasReturn": true, "name": "down", "paramCount": 2, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().down", "reachNames": ["down"], "reason": "Valid", "startIndex": 440, "startLine": 24, "type": "function"}, "function_code": "function (queryInterface, Sequelize) {\n    return queryInterface.removeColumn('LeaveTypes', 'sort_order');\n  }", "function_name": "down", "function_parameters": [{"name": "queryInterface", "type": "simple", "variadic": false}, {"name": "Sequelize", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/migrations/20180103-sort-order-for-leave-types.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":[10,null,null,null]}\\\"\""}, {"js_type": "string", "js_value": "\"user.ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"{\\\"x\\\":5,\\\"y\\\":6}\\\"\""}, {"js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"[3,\\\"false\\\",false]\\\"\""}, {"js_type": "string", "js_value": "\"user@ponicode\""}]}, {"input_values": [{"js_type": "string", "js_value": "\"\\\"\\\"2006-01-02T14:04:05.000Z\\\"\\\"\""}, {"js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"details": {"endIndex": 896, "endLine": 40, "hasReturn": true, "paramCount": 1, "paramsAllSimple": false, "paramsSyntaxSupported": true, "reach": "direct", "reachDetail": "require()", "reason": "UnsupportedParameterNotSimple", "startIndex": 117, "startLine": 8, "type": "function"}, "function_code": "({token, model}) => {\n\n  if ( ! token ) {\n    throwUserError({\n      system_error : \"Provided token has FALSY value\",\n      user_error : \"Wrong access token\",\n    });\n  }\n\n  let action = model.Company.getCompanyByApiToken({ token });\n\n  action = action.then(company => {\n    if ( ! company ) {\n      throwUserError({\n        system_error: `Cannot find company record for provided token ${token}`,\n        user_error: 'Wrong access token',\n      });\n    }\n\n    const [adminUser] = company.get('users').filter(u => u.is_admin());\n\n    if ( ! adminUser) {\n      throwUserError({\n        system_error: `Failed to find admin users for company ${ company.id }`,\n        user_error: 'Wrong access token',\n      });\n    }\n\n    return Promise.resolve(adminUser);\n  });\n\n  return action;\n}", "function_name": "<anonymous function reachable with 'require()'>", "function_parameters": [{"keys": ["token", "model"], "type": "object_pattern", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/passport/getCompanyAdminByToken.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "token", "js_type": "string", "js_value": "\"\""}, {"js_key": "model", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "token", "js_type": "string", "js_value": "\"elio@ponicode.com\""}, {"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "token", "js_type": "null", "js_value": "null"}, {"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "token", "js_type": "string", "js_value": "\"Dillenberg\""}, {"js_key": "model", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "token", "js_type": "number", "js_value": "0"}, {"js_key": "model", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "token", "js_type": "string", "js_value": "\"\""}, {"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "token", "js_type": "boolean", "js_value": "false"}, {"js_key": "model", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "token", "js_type": "undefined", "js_value": "undefined"}, {"js_key": "model", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "token", "js_type": "string", "js_value": "\"elio@ponicode.com\""}, {"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "token", "js_type": "string", "js_value": "\"\""}, {"js_key": "model", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "token", "js_type": "string", "js_value": "\"elio@ponicode.com\""}, {"js_key": "model", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}]}, {"details": {"endIndex": 2697, "endLine": 85, "hasReturn": true, "name": "add_user", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().add_user", "reachNames": ["add_user"], "reason": "Valid", "startIndex": 809, "startLine": 27, "type": "function"}, "function_code": "function add_user(args) {\n  let validated_args = Joi.validate(args, add_user_interface_schema);\n\n  if (validated_args.error) {\n    console.log('An error occured when validatin parameters for add_user: ');\n    console.dir(validated_args);\n    Exception.throw_user_error({\n      system_error : 'Failed to add new due to validation errors',\n      user_error : 'Failed to add user',\n    });\n  }\n\n  // Use validated (and expanded) arguments object\n  args = validated_args.value;\n\n  let attributes = {};\n\n  attributes.email        = args.email.toLowerCase();\n  attributes.lastname     = args.lastname;\n  attributes.name         = args.name;\n  attributes.companyId    = args.company_id;\n  attributes.DepartmentId = args.department_id;\n\n  attributes.password     = Models.User.hashify_password(args.password);\n  attributes.admin        = args.admin;\n  attributes.auto_approve = args.auto_approve;\n  attributes.end_date     = args.end_date;\n\n  // Pass start date inky if it is set, otherwise rely on database to use\n  // default value\n  if (args.start_date) {\n    attributes.start_date = args.start_date;\n  }\n\n  return Promise.resolve()\n\n    // Ensure given department ID is owned by given company ID\n    .then(() => Models.Department\n      .findOne({\n        where : { id : args.department_id, companyId : args.company_id },\n      })\n      .then( department => {\n        if ( ! department ) {\n          Exception.throw_user_error({\n            system_error : 'Mismatch in department/company IDs when creating new user '\n              + args.department_id + '/' + args.company_id,\n            user_error : 'Used wrong department',\n          });\n        }\n        return Promise.resolve();\n      })\n    )\n\n    // Ensure provided email is free to use\n    .then(() => validate_email_to_be_free({ email : args.email }))\n\n    // Create new user record\n    .then(() => Models.User.create(attributes));\n}", "function_name": "add_user", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/user_importer.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "lastname", "js_type": "string", "js_value": "\"\\u062e\\u0644\\u064a\\u0644\""}, {"js_key": "department_id", "js_type": "string", "js_value": "\"Roma\""}, {"js_key": "name", "js_type": "string", "js_value": "\"array\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"ponicode.com\""}, {"js_key": "company_id", "js_type": "string", "js_value": "\"Roma\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"01/01/2020\""}, {"js_key": "auto_approve", "js_type": "boolean", "js_value": "false"}, {"js_key": "start_date", "js_type": "string", "js_value": "\"20200101\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "lastname", "js_type": "string", "js_value": "\"edmond\""}, {"js_key": "department_id", "js_type": "string", "js_value": "\"\\u5317\\u4eac\""}, {"js_key": "name", "js_type": "string", "js_value": "\"array\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user.ponicode.com\""}, {"js_key": "company_id", "js_type": "string", "js_value": "\"New York\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "auto_approve", "js_type": "boolean", "js_value": "true"}, {"js_key": "start_date", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "lastname", "js_type": "string", "js_value": "\"George\""}, {"js_key": "department_id", "js_type": "string", "js_value": "\"\\u0627\\u0644\\u0631\\u0650\\u0651\\u0628\\u064e\\u0627\\u0637\\u200e\""}, {"js_key": "name", "js_type": "string", "js_value": "\"object\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"1user@ponicode.com\""}, {"js_key": "company_id", "js_type": "string", "js_value": "\"Saint-Denis\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"20200101\""}, {"js_key": "auto_approve", "js_type": "boolean", "js_value": "true"}, {"js_key": "start_date", "js_type": "string", "js_value": "\"1-1-2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "lastname", "js_type": "string", "js_value": "\"George\""}, {"js_key": "department_id", "js_type": "string", "js_value": "\"\\u5317\\u4eac\""}, {"js_key": "name", "js_type": "string", "js_value": "\"array\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user.ponicode.com\""}, {"js_key": "company_id", "js_type": "string", "js_value": "\"\\u0627\\u0644\\u0631\\u0650\\u0651\\u0628\\u064e\\u0627\\u0637\\u200e\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"01/13/2020\""}, {"js_key": "auto_approve", "js_type": "boolean", "js_value": "true"}, {"js_key": "start_date", "js_type": "string", "js_value": "\"20200101\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "lastname", "js_type": "string", "js_value": "\"edmond\""}, {"js_key": "department_id", "js_type": "string", "js_value": "\"\\u5317\\u4eac\""}, {"js_key": "name", "js_type": "string", "js_value": "\"string\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "company_id", "js_type": "string", "js_value": "\"New York\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "auto_approve", "js_type": "boolean", "js_value": "true"}, {"js_key": "start_date", "js_type": "string", "js_value": "\"01/13/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "lastname", "js_type": "string", "js_value": "\"\\u8427\""}, {"js_key": "department_id", "js_type": "string", "js_value": "\"\\u0627\\u0644\\u0631\\u0650\\u0651\\u0628\\u064e\\u0627\\u0637\\u200e\""}, {"js_key": "name", "js_type": "string", "js_value": "\"object\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user.ponicode.com\""}, {"js_key": "company_id", "js_type": "string", "js_value": "\"Saint-Denis\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"01/01/2020\""}, {"js_key": "auto_approve", "js_type": "boolean", "js_value": "true"}, {"js_key": "start_date", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "lastname", "js_type": "string", "js_value": "\"George\""}, {"js_key": "department_id", "js_type": "string", "js_value": "\"New York\""}, {"js_key": "name", "js_type": "string", "js_value": "\"string\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "company_id", "js_type": "string", "js_value": "\"Saint-Denis\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "auto_approve", "js_type": "boolean", "js_value": "false"}, {"js_key": "start_date", "js_type": "string", "js_value": "\"01/13/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "lastname", "js_type": "string", "js_value": "\"edmond\""}, {"js_key": "department_id", "js_type": "string", "js_value": "\"\\u0627\\u0644\\u0631\\u0650\\u0651\\u0628\\u064e\\u0627\\u0637\\u200e\""}, {"js_key": "name", "js_type": "string", "js_value": "\"object\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user@ponicode\""}, {"js_key": "company_id", "js_type": "string", "js_value": "\"\\u5317\\u4eac\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "auto_approve", "js_type": "boolean", "js_value": "true"}, {"js_key": "start_date", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "lastname", "js_type": "string", "js_value": "\"\\u062e\\u0644\\u064a\\u0644\""}, {"js_key": "department_id", "js_type": "string", "js_value": "\"Saint-Denis\""}, {"js_key": "name", "js_type": "string", "js_value": "\"array\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"1user@ponicode.com\""}, {"js_key": "company_id", "js_type": "string", "js_value": "\"\\u0627\\u0644\\u0631\\u0650\\u0651\\u0628\\u064e\\u0627\\u0637\\u200e\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"01/01/2020\""}, {"js_key": "auto_approve", "js_type": "boolean", "js_value": "false"}, {"js_key": "start_date", "js_type": "string", "js_value": "\"01/01/2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "lastname", "js_type": "string", "js_value": "\"\\u8427\""}, {"js_key": "department_id", "js_type": "string", "js_value": "\"Roma\""}, {"js_key": "name", "js_type": "string", "js_value": "\"array\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}, {"js_key": "company_id", "js_type": "string", "js_value": "\"New York\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "auto_approve", "js_type": "boolean", "js_value": "false"}, {"js_key": "start_date", "js_type": "string", "js_value": "\"1-1-2020\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "lastname", "js_type": "string", "js_value": "\"\\u8427\""}, {"js_key": "department_id", "js_type": "string", "js_value": "\"Paris\""}, {"js_key": "name", "js_type": "string", "js_value": "\"array\""}, {"js_key": "admin", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}, {"js_key": "company_id", "js_type": "string", "js_value": "\"\\u0627\\u0644\\u0631\\u0650\\u0651\\u0628\\u064e\\u0627\\u0637\\u200e\""}, {"js_key": "end_date", "js_type": "string", "js_value": "\"1-1-2020\""}, {"js_key": "auto_approve", "js_type": "boolean", "js_value": "true"}, {"js_key": "start_date", "js_type": "string", "js_value": "\"01/13/2020\""}]}]}]}, {"details": {"endIndex": 5104, "endLine": 175, "hasReturn": true, "name": "add_users_in_bulk", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().add_users_in_bulk", "reachNames": ["add_users_in_bulk"], "reason": "Valid", "startIndex": 2699, "startLine": 87, "type": "function"}, "function_code": "function add_users_in_bulk(args) {\n  let bulk_header = args.bulk_header,\n      bulk_data   = args.bulk_data,\n      company_id  = args.to_company_id;\n\n  let company,\n    email_vector_index      = 0,\n    lastname_vector_index   = 1,\n    name_vector_index       = 2,\n    department_vector_index = 3;\n\n  return Models.Company.scope('with_simple_departments').findOne({\n    where : { id : company_id },\n  })\n\n\n  // Validate department names and replace names with IDs\n  .then(cmp => {\n    company = cmp;\n    let dep_name_to_id = _.object(\n      company.departments.map(dep => [dep.name, dep.id])\n    );\n\n    let with_invalid_departments = _.filter(\n      bulk_data, vector => ! dep_name_to_id[ vector[ department_vector_index] ]\n    );\n\n    if (with_invalid_departments.length > 0) {\n      let unknown_departments =  with_invalid_departments\n        .map(vector => '\"'+vector[department_vector_index]+'\"')\n        .join(', ');\n\n      Exception.throw_user_error({\n        user_error : 'Following departments could not be found in '\n          + company.name + ' account: ' + unknown_departments,\n        system_error : 'While importing users to company '\n          + company.id + ' there were unknown departments '\n          + unknown_departments,\n      });\n    }\n\n    bulk_data.forEach(\n      vector => vector[ department_vector_index ] = dep_name_to_id[ vector[ department_vector_index ] ]\n    );\n\n    return Promise.resolve();\n  })\n\n  // Add users\n  .then(() => {\n    return Promise.map(bulk_data, vector => {\n      let email = vector[ email_vector_index ];\n\n      return Promise.resolve()\n        .then(() => add_user({\n          email         : email,\n          lastname      : vector[ lastname_vector_index ],\n          name          : vector[ name_vector_index ],\n          department_id : vector[ department_vector_index ],\n          company_id    : company_id,\n        }))\n        .catch(error => {\n          return Promise.resolve({\n            error : error,\n            email : email,\n          });\n        });\n    }, {\n      concurrency : 2,\n    })\n  })\n\n  // Sort out successfully creted users and errors\n  .then(users_or_errors => {\n    let result = {\n      users : [],\n      errors : [],\n    };\n\n    users_or_errors.forEach( item => {\n      item.hasOwnProperty('error')\n        ? result.errors.push( item )\n        : result.users.push( item )\n    });\n\n    return Promise.resolve(result);\n  });\n\n}", "function_name": "add_users_in_bulk", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/user_importer.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "bulk_header", "js_type": "string", "js_value": "\"ponicode123\""}, {"js_key": "to_company_id", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "bulk_header", "js_type": "string", "js_value": "\"ponicode123\""}, {"js_key": "to_company_id", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "bulk_header", "js_type": "string", "js_value": "\"ponicode\""}, {"js_key": "to_company_id", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "bulk_header", "js_type": "string", "js_value": "\"poni_code\""}, {"js_key": "to_company_id", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "bulk_header", "js_type": "string", "js_value": "\"poni-code\""}, {"js_key": "to_company_id", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "bulk_header", "js_type": "string", "js_value": "\"poni code\""}, {"js_key": "to_company_id", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "bulk_header", "js_type": "string", "js_value": "\"poni code\""}, {"js_key": "to_company_id", "js_type": "string", "js_value": "\"user1+user2@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "bulk_header", "js_type": "string", "js_value": "\"ponicode\""}, {"js_key": "to_company_id", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "bulk_header", "js_type": "string", "js_value": "\"poni-code\""}, {"js_key": "to_company_id", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "bulk_header", "js_type": "string", "js_value": "\"poni&code\""}, {"js_key": "to_company_id", "js_type": "string", "js_value": "\"ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "bulk_header", "js_type": "string", "js_value": "\"ponicode123\""}, {"js_key": "to_company_id", "js_type": "string", "js_value": "\"1user@ponicode.com\""}]}]}]}, {"details": {"endIndex": 5779, "endLine": 204, "hasReturn": true, "name": "validate_email_to_be_free", "paramCount": 1, "paramsAllSimple": true, "paramsSyntaxSupported": true, "reach": "member", "reachDetail": "require().validate_email_to_be_free", "reachNames": ["validate_email_to_be_free"], "reason": "Valid", "startIndex": 5230, "startLine": 181, "type": "function"}, "function_code": "function validate_email_to_be_free(args) {\n  let validate_args = Joi.validate(args, validate_email_to_be_free_schema);\n\n  if (validate_args.error) {\n    Exception.throw_user_error({\n      system_error : 'validate_email_to_be_free failed arguments validation',\n      user_error   : 'Failed to validate email',\n    });\n  }\n\n  return Models\n    .User\n    .find_by_email(args.email)\n    .then(user => {\n\n      if (user) {\n        Exception.throw_user_error(\n          'Email is already in use'\n        );\n      }\n\n      return Promise.resolve();\n  });\n}", "function_name": "validate_email_to_be_free", "function_parameters": [{"name": "args", "type": "simple", "variadic": false}], "function_path": "/home/edmond/ponicode_data/harlequin/javascript/pitfall/kaleidoscope/timeoff-management-application/lib/model/user_importer.js", "test_cases": [], "test_suggestions": [{"input_values": [{"js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode.co.uk\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"User0@Ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user.ponicode.com\""}]}]}, {"input_values": [{"js_type": "object", "js_value": [{"js_key": "email", "js_type": "string", "js_value": "\"user@ponicode\""}]}]}]}]